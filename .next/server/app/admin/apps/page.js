(()=>{var e={};e.id=6886,e.ids=[6886],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},67870:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(46703),s(20060),s(35866);var r=s(23191),t=s(88716),l=s(37922),i=s.n(l),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(a,c);let d=["",{children:["admin",{children:["apps",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,46703)),"E:\\base\\store\\farcaster-base-hub\\src\\app\\admin\\apps\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,20060)),"E:\\base\\store\\farcaster-base-hub\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\base\\store\\farcaster-base-hub\\src\\app\\admin\\apps\\page.tsx"],p="/admin/apps/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/apps/page",pathname:"/admin/apps",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80319:(e,a,s)=>{Promise.resolve().then(s.bind(s,57415))},66307:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},69669:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},48998:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},31540:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7027:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},71709:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},33734:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},98091:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63685:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},3634:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(62881).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},57415:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>F});var r=s(10326),t=s(17577),l=s(29752),i=s(91664),n=s(41190),c=s(82015),d=s(27299),o=s(29280),p=s(24118),m=s(47779),h=s(11004),u=s(84097),x=s(58038),g=s(31540),j=s(63685),v=s(3634),f=s(48998),y=s(66307),b=s(69669),N=s(7027),w=s(33734);let k=(0,s(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var C=s(98091),S=s(71709),U=s(94019),z=s(46226),Z=s(90434);let A=["Finance","Tools","Social","Airdrops","Games","Memecoins","Utilities"];function F(){let[e,a]=(0,t.useState)([]),[s,F]=(0,t.useState)([]),[I,E]=(0,t.useState)(!0),[_,R]=(0,t.useState)(null),[P,M]=(0,t.useState)(null),[L,O]=(0,t.useState)({}),[q,V]=(0,t.useState)(null),[D,$]=(0,t.useState)(null),[B,T]=(0,t.useState)(!1),[H,J]=(0,t.useState)(""),[W,K]=(0,t.useState)(!1),[G,X]=(0,t.useState)(!1),[Y,Q]=(0,t.useState)(""),[ee,ea]=(0,t.useState)(""),[es,er]=(0,t.useState)(!1),[et,el]=(0,t.useState)(!1),[ei,en]=(0,t.useState)(""),[ec,ed]=(0,t.useState)("0x0CF70E448ac98689e326bd79075a96CcBcec1665"),[eo,ep]=(0,t.useState)(!1),[em,eh]=(0,t.useState)(!1),[eu,ex]=(0,t.useState)(!1),[eg,ej]=(0,t.useState)(!1),[ev,ef]=(0,t.useState)(!1),[ey,eb]=(0,t.useState)(""),eN=(0,t.useRef)(null),ew=(0,t.useRef)(null),ek=(0,t.useRef)(null),{toast:eC}=(0,u.pm)();async function eS(){try{let[e,s]=await Promise.all([fetch("/api/admin/apps",{credentials:"include"}),fetch("/api/admin/apps/pending",{credentials:"include"})]);if(e.ok){let s=await e.json();a(s.apps||[])}if(s.ok){let e=await s.json();F(e.apps||[])}}catch(e){console.error("Error fetching apps:",e),eC({title:"Error",description:"Failed to fetch apps",variant:"destructive"})}finally{E(!1)}}async function eU(){eh(!0);try{let e=await fetch("/api/admin/miniapps/sync-featured",{method:"POST",credentials:"include"}),a=await e.json();if(!e.ok)throw Error(a.error||a.message||"Failed to sync mini-apps");if(0===a.synced){let e=[];a.searchErrors&&a.searchErrors.length>0&&e.push(`Search errors: ${a.searchErrors.join(", ")}`),a.details?.suggestion&&e.push(a.details.suggestion),eC({title:"Sync Completed - No Apps Found",description:a.message||`No apps found. ${e.length>0?e.join(". "):"Check console logs for details."}`,variant:!1===a.success?"destructive":"default",duration:8e3})}else eC({title:"Sync Complete!",description:`Synced ${a.synced} apps from Neynar search (${a.created} new, ${a.updated} updated)`});await eS()}catch(s){console.error("Error syncing mini-apps:",s);let e=s.message||"Failed to sync mini-apps from Neynar",a=e.includes("Payment Required")||e.includes("paid plan");eC({title:"Sync Failed",description:a?"Neynar API requires a paid plan for catalog access. Use Auto Import or add apps manually instead.":e,variant:"destructive",duration:a?8e3:5e3})}finally{eh(!1)}}async function ez(e,a){R(e);try{let s={};"approve"===a?s.status="approved":"reject"===a?s.status="rejected":"verify"===a?s.verified=!0:"approve_contract"===a?(s.contractVerified=!0,s.verified=!0,s.status="approved"):"reject_contract"===a?(s.contractVerified=!1,s.status="pending_review"):"feature_banner"===a?s.featuredInBanner=!0:"unfeature_banner"===a&&(s.featuredInBanner=!1);let r=await fetch("/api/admin/apps",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({appId:e,...s})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update app")}eC({title:"Success",description:"approve"===a?"App approved! It will now appear on the homepage.":`App ${a}d successfully`}),await eS()}catch(e){eC({title:"Error",description:e.message||"Failed to update app",variant:"destructive"})}finally{R(null)}}async function eZ(e,a){if(!e)return;let s="icon"===a?ex:"header"===a?ej:ef;s(!0);try{let s=new FormData;s.append("file",e),s.append("type",a);let r=await fetch("/api/admin/upload",{method:"POST",credentials:"include",body:s});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to upload file")}let t=await r.json();"icon"===a?O({...L,iconUrl:t.url}):"header"===a?O({...L,headerImageUrl:t.url}):"screenshot"===a&&O({...L,screenshots:[...L.screenshots||[],t.url]}),eC({title:"Success",description:`${"icon"===a?"Icon":"header"===a?"Header image":"Screenshot"} uploaded successfully`})}catch(e){eC({title:"Upload Error",description:e.message||"Failed to upload file",variant:"destructive"})}finally{s(!1)}}let eA=()=>{ey.trim()&&!L.screenshots?.includes(ey.trim())&&(O({...L,screenshots:[...L.screenshots||[],ey.trim()]}),eb(""))},eF=e=>{O({...L,screenshots:L.screenshots?.filter((a,s)=>s!==e)||[]})};async function eI(){if(P){R(P.id);try{let e=await fetch("/api/admin/apps",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({appId:P.id,...L})});if(!e.ok){let a=await e.json();throw Error(a.error||"Failed to update app")}eC({title:"Success",description:"App updated successfully"}),M(null),eS()}catch(e){eC({title:"Error",description:e.message||"Failed to update app",variant:"destructive"})}finally{R(null)}}}async function eE(e){R(e);try{let a=await fetch(`/api/admin/apps?appId=${e}`,{method:"DELETE",credentials:"include"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to delete app")}eC({title:"Success",description:"App deleted successfully"}),V(null),eS()}catch(e){eC({title:"Error",description:e.message||"Failed to delete app",variant:"destructive"})}finally{R(null)}}return I?r.jsx(m.Z,{message:"Loading admin panel..."}):(0,r.jsxs)("div",{className:"min-h-screen bg-[#0B0F19] pb-24",children:[r.jsx(h.Z,{}),r.jsx("div",{className:"pt-8 pb-8",children:(0,r.jsxs)("div",{className:"max-w-screen-lg mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(x.Z,{className:"w-6 h-6 text-base-blue"}),"Admin - App Management"]}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Review and manage app submissions"}),(0,r.jsxs)("div",{className:"mt-4 flex gap-2",children:[r.jsx("a",{href:"/api/admin/apps/export-csv",download:!0,children:(0,r.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(g.Z,{className:"w-4 h-4"}),"Export CSV"]})}),"ADMIN"===D&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2 border-base-blue/50 text-base-blue hover:bg-base-blue/10",onClick:()=>T(!0),children:[r.jsx(j.Z,{className:"w-4 h-4"}),"Auto Import"]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2 border-purple-500/50 text-purple-400 hover:bg-purple-500/10",onClick:()=>X(!0),children:[r.jsx(j.Z,{className:"w-4 h-4"}),"Import from .json URL"]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2 border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/10",onClick:()=>el(!0),children:[r.jsx(j.Z,{className:"w-4 h-4"}),"Bulk Import (CSV JSON)"]}),r.jsx(i.z,{variant:"default",size:"sm",className:"gap-2 bg-gradient-to-r from-purple-500 to-base-blue hover:from-purple-600 hover:to-base-blue/90",onClick:eU,disabled:em,children:em?(0,r.jsxs)(r.Fragment,{children:[r.jsx(v.Z,{className:"w-4 h-4 animate-spin"}),"Syncing..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(v.Z,{className:"w-4 h-4"}),"Sync Featured Mini Apps"]})})]})]})]}),s.length>0&&(0,r.jsxs)(l.Zb,{className:"glass-card mb-6",children:[r.jsx(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[r.jsx(f.Z,{className:"w-5 h-5 text-yellow-500"}),"Pending Review (",s.length,")"]})}),r.jsx(l.aY,{children:r.jsx("div",{className:"space-y-4",children:s.map(e=>r.jsx("div",{className:"p-4 rounded-lg bg-background-secondary border border-white/10",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[e.iconUrl&&r.jsx(z.default,{src:e.iconUrl,alt:e.name,width:64,height:64,className:"w-16 h-16 rounded-xl flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-start justify-between mb-2",children:(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-1",children:e.name}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[(0,r.jsxs)("span",{children:["Category: ",e.category]}),(0,r.jsxs)("span",{children:["Developer: ",e.developer?.name||"Unknown"]}),e.developer?.verified&&r.jsx("span",{className:"text-green-500",children:"✓ Verified Dev"})]}),e.reviewMessage&&(0,r.jsxs)("div",{className:"bg-base-blue/10 border border-base-blue/30 rounded p-2 mt-2",children:[r.jsx("p",{className:"text-xs font-medium mb-1",children:"Review Request:"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.reviewMessage})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"approve"),disabled:_===e.id,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[r.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Approve"]}),(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"reject"),disabled:_===e.id,variant:"destructive",size:"sm",children:[r.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Reject"]}),r.jsx(Z.default,{href:e.url,target:"_blank",children:(0,r.jsxs)(i.z,{variant:"outline",size:"sm",children:[r.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"View App"]})})]})]})]})},e.id))})})]}),(0,r.jsxs)(l.Zb,{className:"glass-card",children:[r.jsx(l.Ol,{children:(0,r.jsxs)(l.ll,{children:["All Apps (",e.length,")"]})}),r.jsx(l.aY,{children:r.jsx("div",{className:"space-y-3",children:e.map(e=>(0,r.jsxs)("div",{className:"p-3 rounded-lg bg-background-secondary border border-white/10 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.iconUrl&&r.jsx(z.default,{src:e.iconUrl,alt:e.name,width:48,height:48,className:"w-12 h-12 rounded-lg flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-semibold truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,r.jsxs)("span",{children:["Status: ",e.status]}),e.verified&&r.jsx("span",{className:"text-green-500",children:"✓ Verified"})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,r.jsxs)("p",{className:"truncate",children:["URL: ",e.url]}),e.baseMiniAppUrl&&(0,r.jsxs)("p",{className:"truncate",children:["Base: ",e.baseMiniAppUrl]}),e.farcasterUrl&&(0,r.jsxs)("p",{className:"truncate",children:["Farcaster: ",e.farcasterUrl]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[("pending_review"===e.status||"pending"===e.status)&&(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"approve"),disabled:_===e.id,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[r.jsx(y.Z,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.contractAddress&&!e.contractVerified&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"approve_contract"),disabled:_===e.id,variant:"outline",size:"sm",className:"border-green-600/50 text-green-400 hover:bg-green-600/10",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-1"}),"Approve Contract"]}),(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"reject_contract"),disabled:_===e.id,variant:"outline",size:"sm",className:"border-red-600/50 text-red-400 hover:bg-red-600/10",children:[r.jsx(b.Z,{className:"w-4 h-4 mr-1"}),"Reject Contract"]})]}),!e.verified&&(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"verify"),disabled:_===e.id,variant:"outline",size:"sm",className:"border-green-600/50 text-green-400 hover:bg-green-600/10",children:[r.jsx(y.Z,{className:"w-4 h-4 mr-1"}),"Verify"]}),e.featuredInBanner?(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"unfeature_banner"),disabled:_===e.id,variant:"outline",size:"sm",className:"border-yellow-600/50 text-yellow-400 hover:bg-yellow-600/10",title:"Remove from homepage banner",children:[r.jsx(w.Z,{className:"w-4 h-4 mr-1 fill-yellow-400"}),"Featured"]}):(0,r.jsxs)(i.z,{onClick:()=>ez(e.id,"feature_banner"),disabled:_===e.id,variant:"outline",size:"sm",className:"border-purple-600/50 text-purple-400 hover:bg-purple-600/10",title:"Add to homepage banner",children:[r.jsx(w.Z,{className:"w-4 h-4 mr-1"}),"Feature"]}),(0,r.jsxs)(i.z,{onClick:()=>{M(e),O({name:e.name,description:e.description,url:e.url,baseMiniAppUrl:e.baseMiniAppUrl||"",farcasterUrl:e.farcasterUrl||"",iconUrl:e.iconUrl||"",headerImageUrl:e.headerImageUrl||"",category:e.category,screenshots:e.screenshots||[]}),eb("")},disabled:_===e.id,variant:"outline",size:"sm",className:"border-base-blue/50 text-base-blue hover:bg-base-blue/10",children:[r.jsx(k,{className:"w-4 h-4 mr-1"}),"Edit"]}),"ADMIN"===D&&(0,r.jsxs)(i.z,{onClick:()=>V(e.id),disabled:_===e.id,variant:"outline",size:"sm",className:"border-red-600/50 text-red-400 hover:bg-red-600/10",children:[r.jsx(C.Z,{className:"w-4 h-4 mr-1"}),"Delete"]}),r.jsx(Z.default,{href:`/apps/${e.id}`,children:(0,r.jsxs)(i.z,{variant:"outline",size:"sm",children:[r.jsx(N.Z,{className:"w-4 h-4 mr-1"}),"View"]})})]})]},e.id))})})]}),r.jsx(p.Vq,{open:!!P,onOpenChange:e=>!e&&M(null),children:(0,r.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(p.fK,{children:[(0,r.jsxs)(p.$N,{children:["Edit App: ",P?.name]}),r.jsx(p.Be,{children:"Update app details. All changes will be saved immediately."})]}),P&&(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-name",children:"App Name *"}),r.jsx(n.I,{id:"edit-name",value:L.name||"",onChange:e=>O({...L,name:e.target.value}),className:"glass-card"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-description",children:"Description *"}),r.jsx(c.g,{id:"edit-description",value:L.description||"",onChange:e=>O({...L,description:e.target.value}),className:"glass-card min-h-[100px]"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-url",children:"Main Website URL *"}),r.jsx(n.I,{id:"edit-url",type:"url",value:L.url||"",onChange:e=>O({...L,url:e.target.value}),className:"glass-card"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-base-url",children:"Base Mini App URL (Optional)"}),r.jsx(n.I,{id:"edit-base-url",type:"url",value:L.baseMiniAppUrl||"",onChange:e=>O({...L,baseMiniAppUrl:e.target.value}),className:"glass-card"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-farcaster-url",children:"Farcaster Mini App URL (Optional)"}),r.jsx(n.I,{id:"edit-farcaster-url",type:"url",value:L.farcasterUrl||"",onChange:e=>O({...L,farcasterUrl:e.target.value}),className:"glass-card"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-icon-url",children:"Icon URL"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.I,{id:"edit-icon-url",type:"url",value:L.iconUrl||"",onChange:e=>O({...L,iconUrl:e.target.value}),className:"glass-card flex-1",placeholder:"https://example.com/icon.png"}),r.jsx("input",{ref:eN,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let a=e.target.files?.[0];a&&eZ(a,"icon")},disabled:eu}),r.jsx(i.z,{type:"button",variant:"outline",size:"sm",disabled:eu,className:"whitespace-nowrap",onClick:()=>eN.current?.click(),children:eu?"Uploading...":"Upload"})]}),L.iconUrl&&r.jsx("div",{className:"mt-2",children:r.jsx(z.default,{src:L.iconUrl,alt:"Icon preview",width:64,height:64,className:"w-16 h-16 rounded-lg border border-gray-700"})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter a URL or upload a new icon image (max 5MB)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-header-image-url",children:"Header Image URL (Optional)"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.I,{id:"edit-header-image-url",type:"url",placeholder:"https://myapp.example.com/header.png or og-image from farcaster.json",value:L.headerImageUrl||"",onChange:e=>O({...L,headerImageUrl:e.target.value}),className:"glass-card flex-1"}),r.jsx("input",{ref:ew,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let a=e.target.files?.[0];a&&eZ(a,"header")},disabled:eg}),r.jsx(i.z,{type:"button",variant:"outline",size:"sm",disabled:eg,className:"whitespace-nowrap",onClick:()=>ew.current?.click(),children:eg?"Uploading...":"Upload"})]}),L.headerImageUrl&&r.jsx("div",{className:"mt-2",children:r.jsx(z.default,{src:L.headerImageUrl,alt:"Header preview",width:400,height:200,className:"w-full max-w-md h-32 object-cover rounded-lg border border-gray-700"})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Header image for app banner and detail page (like Twitter header). Enter a URL or upload a new image (max 5MB)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"edit-category",children:"Category *"}),(0,r.jsxs)(o.Ph,{value:L.category||"",onValueChange:e=>O({...L,category:e}),children:[r.jsx(o.i4,{className:"glass-card",children:r.jsx(o.ki,{placeholder:"Select category"})}),r.jsx(o.Bw,{className:"glass-card border-white/10",children:A.map(e=>r.jsx(o.Ql,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"screenshots",children:"Screenshots (Optional)"}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Add screenshots to showcase the app, similar to Play Store. You can upload images or add URLs."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.I,{id:"screenshots",type:"url",placeholder:"https://example.com/screenshot.png",value:ey,onChange:e=>eb(e.target.value),onKeyDown:e=>{"Enter"===e.key&&ey.trim()&&(e.preventDefault(),eA())},className:"glass-card flex-1"}),r.jsx("input",{ref:ek,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let a=e.target.files?.[0];a&&eZ(a,"screenshot")},disabled:ev}),r.jsx(i.z,{type:"button",onClick:eA,disabled:!ey.trim(),className:"bg-base-blue hover:bg-base-blue/90",children:r.jsx(S.Z,{className:"w-4 h-4"})}),(0,r.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>ek.current?.click(),disabled:ev,className:"whitespace-nowrap",children:[r.jsx(j.Z,{className:"w-4 h-4 mr-1"}),ev?"Uploading...":"Upload"]})]}),L.screenshots&&L.screenshots.length>0&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:L.screenshots.map((e,a)=>(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("img",{src:e,alt:`Screenshot ${a+1}`,className:"w-full h-32 object-cover rounded-lg border border-white/10",onError:e=>{e.target.src="https://via.placeholder.com/400x300?text=Invalid+Image"}}),r.jsx("button",{type:"button",onClick:()=>eF(a),className:"absolute top-1 right-1 bg-red-500/80 hover:bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(U.Z,{className:"w-3 h-3"})})]},a))})]})]})]}),(0,r.jsxs)(p.cN,{children:[r.jsx(i.z,{variant:"outline",onClick:()=>M(null),disabled:!!_,children:"Cancel"}),r.jsx(i.z,{onClick:eI,disabled:!!_||!L.name||!L.description||!L.url||!L.category,className:"bg-base-blue hover:bg-base-blue/90",children:_===P?.id?"Saving...":"Save Changes"})]})]})}),r.jsx(p.Vq,{open:B,onOpenChange:T,children:(0,r.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-md",children:[(0,r.jsxs)(p.fK,{children:[(0,r.jsxs)(p.$N,{className:"flex items-center gap-2",children:[r.jsx(v.Z,{className:"w-5 h-5 text-base-blue"}),"Auto Import from Farcaster.json"]}),r.jsx(p.Be,{children:"Enter the app URL. We'll automatically fetch metadata from /.well-known/farcaster.json including name, icon, description, and all app details."})]}),r.jsx("div",{className:"space-y-4 py-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"import-url",children:"App URL *"}),r.jsx(n.I,{id:"import-url",type:"url",placeholder:"https://myapp.example.com",value:H,onChange:e=>J(e.target.value),className:"glass-card"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"We'll automatically fetch farcaster.json and extract all metadata including the app icon."})]})}),(0,r.jsxs)(p.cN,{children:[r.jsx(i.z,{variant:"outline",onClick:()=>{T(!1),J("")},disabled:W,children:"Cancel"}),r.jsx(i.z,{onClick:async()=>{if(!H){eC({title:"Error",description:"Please enter an app URL",variant:"destructive"});return}try{new URL(H)}catch{eC({title:"Error",description:"Please enter a valid URL",variant:"destructive"});return}K(!0);try{let e=await fetch("/api/admin/apps/auto-import",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:H})}),a=await e.json();if(!e.ok)throw Error(a.error||a.message||"Failed to import app");eC({title:"Success",description:`App "${a.app?.name||"App"}" imported successfully from farcaster.json`}),T(!1),J(""),eS()}catch(e){eC({title:"Error",description:e.message||"Failed to import app",variant:"destructive"})}finally{K(!1)}},disabled:W||!H,className:"bg-base-blue hover:bg-base-blue/90",children:W?"Importing...":"Import App"})]})]})}),r.jsx(p.Vq,{open:G,onOpenChange:X,children:(0,r.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-md",children:[(0,r.jsxs)(p.fK,{children:[(0,r.jsxs)(p.$N,{className:"flex items-center gap-2",children:[r.jsx(j.Z,{className:"w-5 h-5 text-purple-400"}),"Import from Farcaster.json URL"]}),r.jsx(p.Be,{children:"Enter the direct URL to a farcaster.json file and the developer wallet address. The app will be automatically created and approved."})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"json-url",children:"Farcaster.json URL *"}),r.jsx(n.I,{id:"json-url",type:"url",placeholder:"https://example.com/.well-known/farcaster.json",value:Y,onChange:e=>Q(e.target.value),className:"glass-card"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Direct URL to the farcaster.json file"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"json-wallet",children:"Developer Wallet *"}),r.jsx(n.I,{id:"json-wallet",type:"text",placeholder:"0x...",value:ee,onChange:e=>ea(e.target.value),className:"glass-card font-mono"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Wallet address of the app developer"})]})]}),(0,r.jsxs)(p.cN,{children:[r.jsx(i.z,{variant:"outline",onClick:()=>{X(!1),Q(""),ea("")},disabled:es,children:"Cancel"}),r.jsx(i.z,{onClick:async()=>{if(!Y||!ee){eC({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}if(!/^0x[a-fA-F0-9]{40}$/i.test(ee)){eC({title:"Error",description:"Invalid wallet address format",variant:"destructive"});return}er(!0);try{let e=await fetch("/api/admin/apps/import-json",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({jsonUrl:Y,developerWallet:ee})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to import app");eC({title:"Success",description:"App imported successfully from farcaster.json URL"}),X(!1),Q(""),ea(""),eS()}catch(e){eC({title:"Error",description:e.message||"Failed to import app",variant:"destructive"})}finally{er(!1)}},disabled:es||!Y||!ee,className:"bg-purple-500 hover:bg-purple-600",children:es?"Importing...":"Import App"})]})]})}),r.jsx(p.Vq,{open:et,onOpenChange:el,children:(0,r.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-md",children:[(0,r.jsxs)(p.fK,{children:[(0,r.jsxs)(p.$N,{className:"flex items-center gap-2",children:[r.jsx(j.Z,{className:"w-5 h-5 text-cyan-400"}),"Bulk Import from CSV-Style JSON"]}),(0,r.jsxs)(p.Be,{children:["Import multiple apps from a CSV-style JSON array (matches export format). Use this for the seed file at ",r.jsx("code",{className:"text-xs bg-white/10 px-1 rounded",children:"/seed/miniapps-seed.json"})]})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"bulk-json-url",children:"JSON URL *"}),r.jsx(n.I,{id:"bulk-json-url",type:"url",placeholder:"http://localhost:3000/seed/miniapps-seed.json",value:ei,onChange:e=>en(e.target.value),className:"glass-card"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["URL to CSV-style JSON array (e.g., ",r.jsx("code",{className:"text-xs",children:"/seed/miniapps-seed.json"}),")"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(d._,{htmlFor:"bulk-default-wallet",children:"Default Developer Wallet (Optional)"}),r.jsx(n.I,{id:"bulk-default-wallet",type:"text",placeholder:"0x0CF70E448ac98689e326bd79075a96CcBcec1665",value:ec,onChange:e=>ed(e.target.value),className:"glass-card font-mono"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for apps without a Developer Wallet. Defaults to system wallet if empty."})]})]}),(0,r.jsxs)(p.cN,{children:[r.jsx(i.z,{variant:"outline",onClick:()=>{el(!1),en(""),ed("0x0CF70E448ac98689e326bd79075a96CcBcec1665")},disabled:eo,children:"Cancel"}),r.jsx(i.z,{onClick:async()=>{if(!ei){eC({title:"Error",description:"Please provide a JSON URL",variant:"destructive"});return}ep(!0);try{let e=await fetch("/api/admin/apps/import-csv-json",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({jsonUrl:ei,defaultDeveloperWallet:ec||void 0})}),a=await e.json();if(!e.ok)throw Error(a.error||a.message||"Failed to import apps");eC({title:"Success",description:`Imported ${a.total||0} apps (${a.created||0} created, ${a.updated||0} updated)`,duration:5e3}),a.errors&&a.errors.length>0&&(console.warn("Import errors:",a.errors),eC({title:"Some errors occurred",description:`${a.errors.length} apps had errors. Check console for details.`,variant:"destructive",duration:8e3})),el(!1),en(""),eS()}catch(e){eC({title:"Error",description:e.message||"Failed to import apps",variant:"destructive"})}finally{ep(!1)}},disabled:eo||!ei,className:"bg-cyan-500 hover:bg-cyan-600",children:eo?"Importing...":"Import Apps"})]})]})}),r.jsx(p.Vq,{open:!!q,onOpenChange:e=>!e&&V(null),children:(0,r.jsxs)(p.cZ,{className:"glass-card border-red-500/30",children:[(0,r.jsxs)(p.fK,{children:[r.jsx(p.$N,{className:"text-red-400",children:"Delete App"}),r.jsx(p.Be,{children:"Are you sure you want to delete this app? This action cannot be undone and will delete all associated ratings, reviews, XP, and earnings."})]}),(0,r.jsxs)(p.cN,{children:[r.jsx(i.z,{variant:"outline",onClick:()=>V(null),disabled:!!_,children:"Cancel"}),r.jsx(i.z,{variant:"destructive",onClick:()=>q&&eE(q),disabled:!!_,children:_===q?"Deleting...":"Delete App"})]})]})})]})})]})}},46703:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`E:\base\store\farcaster-base-hub\src\app\admin\apps\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[9276,7912,6226,5536,2894,6534,3672,5019,1004,2187],()=>s(67870));module.exports=r})();