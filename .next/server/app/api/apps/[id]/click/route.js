"use strict";(()=>{var e={};e.id=6262,e.ids=[6262],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},19691:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>k,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var i={};r.r(i),r.d(i,{POST:()=>d});var a=r(49303),s=r(88716),n=r(60670),p=r(87070),o=r(75748),c=r(91585),u=r(26033);let l=c.Ry({type:c.Km(["click","open","install"])});async function d(e,{params:t}){try{let r=await e.json(),{type:i}=l.parse(r),a=await o._.miniApp.findUnique({where:{id:t.id}});if(!a)return p.NextResponse.json({error:"App not found"},{status:404});await o._.appEvent.create({data:{miniAppId:a.id,type:i}});let s={};return"click"===i?s.clicks={increment:1}:"install"===i&&(s.installs={increment:1}),Object.keys(s).length>0&&await o._.miniApp.update({where:{id:a.id},data:s}),p.NextResponse.json({success:!0})}catch(e){if(e instanceof u.jm)return p.NextResponse.json({error:"Invalid event type"},{status:400});return console.error("Log event error:",e),p.NextResponse.json({error:"Failed to log event"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/apps/[id]/click/route",pathname:"/api/apps/[id]/click",filename:"route",bundlePath:"app/api/apps/[id]/click/route"},resolvedPagePath:"E:\\base\\store\\farcaster-base-hub\\src\\app\\api\\apps\\[id]\\click\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:v,staticGenerationAsyncStorage:x,serverHooks:h}=m,g="/api/apps/[id]/click/route";function k(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},75748:(e,t,r)=>{r.d(t,{_:()=>a});var i=r(53524);let a=global.prisma??new i.PrismaClient({log:["error"]})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,5972,1585],()=>r(19691));module.exports=i})();