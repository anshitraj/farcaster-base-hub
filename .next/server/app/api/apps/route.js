"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/apps/route";
exports.ids = ["app/api/apps/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fapps%2Froute&page=%2Fapi%2Fapps%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fapps%2Froute.ts&appDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fapps%2Froute&page=%2Fapi%2Fapps%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fapps%2Froute.ts&appDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_base_store_farcaster_base_hub_src_app_api_apps_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/apps/route.ts */ \"(rsc)/./src/app/api/apps/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/apps/route\",\n        pathname: \"/api/apps\",\n        filename: \"route\",\n        bundlePath: \"app/api/apps/route\"\n    },\n    resolvedPagePath: \"E:\\\\base\\\\store\\\\farcaster-base-hub\\\\src\\\\app\\\\api\\\\apps\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_base_store_farcaster_base_hub_src_app_api_apps_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/apps/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhcHBzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhcHBzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXBwcyUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDYmFzZSU1Q3N0b3JlJTVDZmFyY2FzdGVyLWJhc2UtaHViJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1FJTNBJTVDYmFzZSU1Q3N0b3JlJTVDZmFyY2FzdGVyLWJhc2UtaHViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZhcmNhc3Rlci1iYXNlLWh1Yi8/NDc3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJFOlxcXFxiYXNlXFxcXHN0b3JlXFxcXGZhcmNhc3Rlci1iYXNlLWh1YlxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhcHBzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hcHBzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXBwc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXBwcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkU6XFxcXGJhc2VcXFxcc3RvcmVcXFxcZmFyY2FzdGVyLWJhc2UtaHViXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGFwcHNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FwcHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fapps%2Froute&page=%2Fapi%2Fapps%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fapps%2Froute.ts&appDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/apps/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/apps/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\nasync function GET(request) {\n    // Extract params first so they're available in catch block\n    const searchParams = request.nextUrl.searchParams;\n    const search = searchParams.get(\"search\") || \"\";\n    const category = searchParams.get(\"category\") || undefined;\n    const tag = searchParams.get(\"tag\") || undefined;\n    const sort = searchParams.get(\"sort\") || \"newest\";\n    const limitParam = searchParams.get(\"limit\") || \"20\";\n    const offsetParam = searchParams.get(\"offset\") || \"0\";\n    const limit = parseInt(limitParam, 10) || 20;\n    const offset = parseInt(offsetParam, 10) || 0;\n    try {\n        // Build where clause\n        const where = {\n            status: \"approved\"\n        };\n        if (search) {\n            const searchLower = search.toLowerCase();\n            where.OR = [\n                {\n                    name: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    description: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    category: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    tags: {\n                        has: searchLower\n                    }\n                }\n            ];\n        }\n        if (category) {\n            where.category = category;\n        }\n        if (tag) {\n            where.tags = {\n                has: tag\n            };\n        }\n        // Build orderBy\n        let orderBy = {\n            createdAt: \"desc\"\n        };\n        let shouldRandomize = false;\n        if (sort === \"installs\") {\n            orderBy = {\n                installs: \"desc\"\n            };\n        } else if (sort === \"rating\") {\n            orderBy = {\n                ratingAverage: \"desc\"\n            };\n        } else if (sort === \"newest\") {\n            // For newest, we'll randomize to ensure fair distribution\n            // This ensures new apps get equal visibility\n            shouldRandomize = true;\n            orderBy = {\n                createdAt: \"desc\"\n            };\n        }\n        let apps = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.miniApp.findMany({\n            where,\n            orderBy,\n            take: shouldRandomize ? Math.min(limit * 3, 100) : limit,\n            skip: offset,\n            include: {\n                developer: {\n                    select: {\n                        id: true,\n                        wallet: true,\n                        name: true,\n                        avatar: true,\n                        verified: true\n                    }\n                }\n            }\n        });\n        // Fair randomization algorithm for newest apps\n        // Similar to Play Store - ensures all new apps get visibility\n        if (shouldRandomize && sort === \"newest\") {\n            // Group apps by age buckets (0-1 day, 1-3 days, 3-7 days, etc.)\n            const now = Date.now();\n            const oneDay = 24 * 60 * 60 * 1000;\n            const threeDays = 3 * 24 * 60 * 60 * 1000;\n            const sevenDays = 7 * 24 * 60 * 60 * 1000;\n            const buckets = {\n                \"0-1day\": [],\n                \"1-3days\": [],\n                \"3-7days\": [],\n                \"7+days\": []\n            };\n            apps.forEach((app)=>{\n                const age = now - app.createdAt.getTime();\n                if (age < oneDay) {\n                    buckets[\"0-1day\"].push(app);\n                } else if (age < threeDays) {\n                    buckets[\"1-3days\"].push(app);\n                } else if (age < sevenDays) {\n                    buckets[\"3-7days\"].push(app);\n                } else {\n                    buckets[\"7+days\"].push(app);\n                }\n            });\n            // Shuffle each bucket\n            const shuffle = (array)=>{\n                const shuffled = [\n                    ...array\n                ];\n                for(let i = shuffled.length - 1; i > 0; i--){\n                    const j = Math.floor(Math.random() * (i + 1));\n                    [shuffled[i], shuffled[j]] = [\n                        shuffled[j],\n                        shuffled[i]\n                    ];\n                }\n                return shuffled;\n            };\n            // Interleave apps from different buckets for fair distribution\n            // This ensures newer apps get priority but older new apps still appear\n            const interleaved = [];\n            const maxLength = Math.max(buckets[\"0-1day\"].length, buckets[\"1-3days\"].length, buckets[\"3-7days\"].length, buckets[\"7+days\"].length);\n            const shuffledBuckets = {\n                \"0-1day\": shuffle(buckets[\"0-1day\"]),\n                \"1-3days\": shuffle(buckets[\"1-3days\"]),\n                \"3-7days\": shuffle(buckets[\"3-7days\"]),\n                \"7+days\": shuffle(buckets[\"7+days\"])\n            };\n            // Round-robin distribution: take one from each bucket in rotation\n            for(let i = 0; i < maxLength && interleaved.length < limit; i++){\n                if (shuffledBuckets[\"0-1day\"][i]) interleaved.push(shuffledBuckets[\"0-1day\"][i]);\n                if (interleaved.length >= limit) break;\n                if (shuffledBuckets[\"1-3days\"][i]) interleaved.push(shuffledBuckets[\"1-3days\"][i]);\n                if (interleaved.length >= limit) break;\n                if (shuffledBuckets[\"3-7days\"][i]) interleaved.push(shuffledBuckets[\"3-7days\"][i]);\n                if (interleaved.length >= limit) break;\n                if (shuffledBuckets[\"7+days\"][i]) interleaved.push(shuffledBuckets[\"7+days\"][i]);\n                if (interleaved.length >= limit) break;\n            }\n            // If we still have space, fill with remaining apps\n            const remaining = [\n                ...shuffledBuckets[\"0-1day\"].slice(maxLength),\n                ...shuffledBuckets[\"1-3days\"].slice(maxLength),\n                ...shuffledBuckets[\"3-7days\"].slice(maxLength),\n                ...shuffledBuckets[\"7+days\"].slice(maxLength)\n            ];\n            for (const app of remaining){\n                if (interleaved.length >= limit) break;\n                if (!interleaved.find((a)=>a.id === app.id)) {\n                    interleaved.push(app);\n                }\n            }\n            apps = interleaved.slice(0, limit);\n        }\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.miniApp.count({\n            where\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            apps: apps.map((app)=>({\n                    ...app,\n                    topBaseRank: app.topBaseRank,\n                    autoUpdated: app.autoUpdated,\n                    contractVerified: app.contractVerified,\n                    developerTags: app.developerTags || []\n                })),\n            total,\n            limit,\n            offset\n        });\n    } catch (error) {\n        console.error(\"Get apps error:\", error);\n        // Return empty array instead of error to prevent UI breakage\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            apps: [],\n            total: 0,\n            limit,\n            offset\n        }, {\n            status: 200\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLLE1BQU1iLE9BQU9nQixVQUFXO2dCQUMzQixJQUFJSixZQUFZSixNQUFNLElBQUloRCxPQUFPO2dCQUNqQyxJQUFJLENBQUNvRCxZQUFZTSxJQUFJLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRTlCLEVBQUUsS0FBS1csSUFBSVgsRUFBRSxHQUFHO29CQUM3Q3VCLFlBQVlULElBQUksQ0FBQ0g7Z0JBQ25CO1lBQ0Y7WUFFQXJCLE9BQU9pQyxZQUFZSyxLQUFLLENBQUMsR0FBR3pEO1FBQzlCO1FBRUEsTUFBTTRELFFBQVEsTUFBTXpFLDJDQUFNQSxDQUFDaUMsT0FBTyxDQUFDeUMsS0FBSyxDQUFDO1lBQUUxRDtRQUFNO1FBRWpELE9BQU9qQixxREFBWUEsQ0FBQzRFLElBQUksQ0FBQztZQUN2QjNDLE1BQU1BLEtBQUs0QyxHQUFHLENBQUMsQ0FBQ3ZCLE1BQVM7b0JBQ3ZCLEdBQUdBLEdBQUc7b0JBQ053QixhQUFheEIsSUFBSXdCLFdBQVc7b0JBQzVCQyxhQUFhekIsSUFBSXlCLFdBQVc7b0JBQzVCQyxrQkFBa0IxQixJQUFJMEIsZ0JBQWdCO29CQUN0Q0MsZUFBZTNCLElBQUkyQixhQUFhLElBQUksRUFBRTtnQkFDeEM7WUFDQVA7WUFDQTVEO1lBQ0FFO1FBQ0Y7SUFDRixFQUFFLE9BQU9rRSxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMsbUJBQW1CQTtRQUNqQyw2REFBNkQ7UUFDN0QsT0FBT2xGLHFEQUFZQSxDQUFDNEUsSUFBSSxDQUFDO1lBQ3ZCM0MsTUFBTSxFQUFFO1lBQ1J5QyxPQUFPO1lBQ1A1RDtZQUNBRTtRQUNGLEdBQUc7WUFBRUUsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYXJjYXN0ZXItYmFzZS1odWIvLi9zcmMvYXBwL2FwaS9hcHBzL3JvdXRlLnRzP2JiZjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvZGJcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICAvLyBFeHRyYWN0IHBhcmFtcyBmaXJzdCBzbyB0aGV5J3JlIGF2YWlsYWJsZSBpbiBjYXRjaCBibG9ja1xyXG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXM7XHJcbiAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldChcInNlYXJjaFwiKSB8fCBcIlwiO1xyXG4gIGNvbnN0IGNhdGVnb3J5ID0gc2VhcmNoUGFyYW1zLmdldChcImNhdGVnb3J5XCIpIHx8IHVuZGVmaW5lZDtcclxuICBjb25zdCB0YWcgPSBzZWFyY2hQYXJhbXMuZ2V0KFwidGFnXCIpIHx8IHVuZGVmaW5lZDtcclxuICBjb25zdCBzb3J0ID0gc2VhcmNoUGFyYW1zLmdldChcInNvcnRcIikgfHwgXCJuZXdlc3RcIjtcclxuICBjb25zdCBsaW1pdFBhcmFtID0gc2VhcmNoUGFyYW1zLmdldChcImxpbWl0XCIpIHx8IFwiMjBcIjtcclxuICBjb25zdCBvZmZzZXRQYXJhbSA9IHNlYXJjaFBhcmFtcy5nZXQoXCJvZmZzZXRcIikgfHwgXCIwXCI7XHJcbiAgY29uc3QgbGltaXQgPSBwYXJzZUludChsaW1pdFBhcmFtLCAxMCkgfHwgMjA7XHJcbiAgY29uc3Qgb2Zmc2V0ID0gcGFyc2VJbnQob2Zmc2V0UGFyYW0sIDEwKSB8fCAwO1xyXG5cclxuICB0cnkge1xyXG5cclxuICAgIC8vIEJ1aWxkIHdoZXJlIGNsYXVzZVxyXG4gICAgY29uc3Qgd2hlcmU6IGFueSA9IHtcclxuICAgICAgc3RhdHVzOiBcImFwcHJvdmVkXCIsIC8vIE9ubHkgc2hvdyBhcHByb3ZlZCBhcHBzXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgY29uc3Qgc2VhcmNoTG93ZXIgPSBzZWFyY2gudG9Mb3dlckNhc2UoKTtcclxuICAgICAgd2hlcmUuT1IgPSBbXHJcbiAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiB9IH0sXHJcbiAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9LFxyXG4gICAgICAgIHsgY2F0ZWdvcnk6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIH0gfSxcclxuICAgICAgICB7IHRhZ3M6IHsgaGFzOiBzZWFyY2hMb3dlciB9IH0sIC8vIFNlYXJjaCBpbiB0YWdzIGFycmF5XHJcbiAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgIHdoZXJlLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRhZykge1xyXG4gICAgICB3aGVyZS50YWdzID0geyBoYXM6IHRhZyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ1aWxkIG9yZGVyQnlcclxuICAgIGxldCBvcmRlckJ5OiBhbnkgPSB7IGNyZWF0ZWRBdDogXCJkZXNjXCIgfTtcclxuICAgIGxldCBzaG91bGRSYW5kb21pemUgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgaWYgKHNvcnQgPT09IFwiaW5zdGFsbHNcIikge1xyXG4gICAgICBvcmRlckJ5ID0geyBpbnN0YWxsczogXCJkZXNjXCIgfTtcclxuICAgIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJyYXRpbmdcIikge1xyXG4gICAgICBvcmRlckJ5ID0geyByYXRpbmdBdmVyYWdlOiBcImRlc2NcIiB9O1xyXG4gICAgfSBlbHNlIGlmIChzb3J0ID09PSBcIm5ld2VzdFwiKSB7XHJcbiAgICAgIC8vIEZvciBuZXdlc3QsIHdlJ2xsIHJhbmRvbWl6ZSB0byBlbnN1cmUgZmFpciBkaXN0cmlidXRpb25cclxuICAgICAgLy8gVGhpcyBlbnN1cmVzIG5ldyBhcHBzIGdldCBlcXVhbCB2aXNpYmlsaXR5XHJcbiAgICAgIHNob3VsZFJhbmRvbWl6ZSA9IHRydWU7XHJcbiAgICAgIG9yZGVyQnkgPSB7IGNyZWF0ZWRBdDogXCJkZXNjXCIgfTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYXBwcyA9IGF3YWl0IHByaXNtYS5taW5pQXBwLmZpbmRNYW55KHtcclxuICAgICAgd2hlcmUsXHJcbiAgICAgIG9yZGVyQnksXHJcbiAgICAgIHRha2U6IHNob3VsZFJhbmRvbWl6ZSA/IE1hdGgubWluKGxpbWl0ICogMywgMTAwKSA6IGxpbWl0LCAvLyBGZXRjaCBtb3JlIGlmIHJhbmRvbWl6aW5nXHJcbiAgICAgIHNraXA6IG9mZnNldCxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIGRldmVsb3Blcjoge1xyXG4gICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgICB3YWxsZXQ6IHRydWUsXHJcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgIGF2YXRhcjogdHJ1ZSxcclxuICAgICAgICAgICAgdmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBGYWlyIHJhbmRvbWl6YXRpb24gYWxnb3JpdGhtIGZvciBuZXdlc3QgYXBwc1xyXG4gICAgLy8gU2ltaWxhciB0byBQbGF5IFN0b3JlIC0gZW5zdXJlcyBhbGwgbmV3IGFwcHMgZ2V0IHZpc2liaWxpdHlcclxuICAgIGlmIChzaG91bGRSYW5kb21pemUgJiYgc29ydCA9PT0gXCJuZXdlc3RcIikge1xyXG4gICAgICAvLyBHcm91cCBhcHBzIGJ5IGFnZSBidWNrZXRzICgwLTEgZGF5LCAxLTMgZGF5cywgMy03IGRheXMsIGV0Yy4pXHJcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IG9uZURheSA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgIGNvbnN0IHRocmVlRGF5cyA9IDMgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG4gICAgICBjb25zdCBzZXZlbkRheXMgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuXHJcbiAgICAgIGNvbnN0IGJ1Y2tldHM6IHsgW2tleTogc3RyaW5nXTogdHlwZW9mIGFwcHMgfSA9IHtcclxuICAgICAgICBcIjAtMWRheVwiOiBbXSxcclxuICAgICAgICBcIjEtM2RheXNcIjogW10sXHJcbiAgICAgICAgXCIzLTdkYXlzXCI6IFtdLFxyXG4gICAgICAgIFwiNytkYXlzXCI6IFtdLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXBwcy5mb3JFYWNoKChhcHApID0+IHtcclxuICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBhcHAuY3JlYXRlZEF0LmdldFRpbWUoKTtcclxuICAgICAgICBpZiAoYWdlIDwgb25lRGF5KSB7XHJcbiAgICAgICAgICBidWNrZXRzW1wiMC0xZGF5XCJdLnB1c2goYXBwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFnZSA8IHRocmVlRGF5cykge1xyXG4gICAgICAgICAgYnVja2V0c1tcIjEtM2RheXNcIl0ucHVzaChhcHApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYWdlIDwgc2V2ZW5EYXlzKSB7XHJcbiAgICAgICAgICBidWNrZXRzW1wiMy03ZGF5c1wiXS5wdXNoKGFwcCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJ1Y2tldHNbXCI3K2RheXNcIl0ucHVzaChhcHApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBTaHVmZmxlIGVhY2ggYnVja2V0XHJcbiAgICAgIGNvbnN0IHNodWZmbGUgPSA8VCw+KGFycmF5OiBUW10pOiBUW10gPT4ge1xyXG4gICAgICAgIGNvbnN0IHNodWZmbGVkID0gWy4uLmFycmF5XTtcclxuICAgICAgICBmb3IgKGxldCBpID0gc2h1ZmZsZWQubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgICAgW3NodWZmbGVkW2ldLCBzaHVmZmxlZFtqXV0gPSBbc2h1ZmZsZWRbal0sIHNodWZmbGVkW2ldXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNodWZmbGVkO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gSW50ZXJsZWF2ZSBhcHBzIGZyb20gZGlmZmVyZW50IGJ1Y2tldHMgZm9yIGZhaXIgZGlzdHJpYnV0aW9uXHJcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBuZXdlciBhcHBzIGdldCBwcmlvcml0eSBidXQgb2xkZXIgbmV3IGFwcHMgc3RpbGwgYXBwZWFyXHJcbiAgICAgIGNvbnN0IGludGVybGVhdmVkOiB0eXBlb2YgYXBwcyA9IFtdO1xyXG4gICAgICBjb25zdCBtYXhMZW5ndGggPSBNYXRoLm1heChcclxuICAgICAgICBidWNrZXRzW1wiMC0xZGF5XCJdLmxlbmd0aCxcclxuICAgICAgICBidWNrZXRzW1wiMS0zZGF5c1wiXS5sZW5ndGgsXHJcbiAgICAgICAgYnVja2V0c1tcIjMtN2RheXNcIl0ubGVuZ3RoLFxyXG4gICAgICAgIGJ1Y2tldHNbXCI3K2RheXNcIl0ubGVuZ3RoXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBzaHVmZmxlZEJ1Y2tldHMgPSB7XHJcbiAgICAgICAgXCIwLTFkYXlcIjogc2h1ZmZsZShidWNrZXRzW1wiMC0xZGF5XCJdKSxcclxuICAgICAgICBcIjEtM2RheXNcIjogc2h1ZmZsZShidWNrZXRzW1wiMS0zZGF5c1wiXSksXHJcbiAgICAgICAgXCIzLTdkYXlzXCI6IHNodWZmbGUoYnVja2V0c1tcIjMtN2RheXNcIl0pLFxyXG4gICAgICAgIFwiNytkYXlzXCI6IHNodWZmbGUoYnVja2V0c1tcIjcrZGF5c1wiXSksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBSb3VuZC1yb2JpbiBkaXN0cmlidXRpb246IHRha2Ugb25lIGZyb20gZWFjaCBidWNrZXQgaW4gcm90YXRpb25cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhMZW5ndGggJiYgaW50ZXJsZWF2ZWQubGVuZ3RoIDwgbGltaXQ7IGkrKykge1xyXG4gICAgICAgIGlmIChzaHVmZmxlZEJ1Y2tldHNbXCIwLTFkYXlcIl1baV0pIGludGVybGVhdmVkLnB1c2goc2h1ZmZsZWRCdWNrZXRzW1wiMC0xZGF5XCJdW2ldKTtcclxuICAgICAgICBpZiAoaW50ZXJsZWF2ZWQubGVuZ3RoID49IGxpbWl0KSBicmVhaztcclxuICAgICAgICBpZiAoc2h1ZmZsZWRCdWNrZXRzW1wiMS0zZGF5c1wiXVtpXSkgaW50ZXJsZWF2ZWQucHVzaChzaHVmZmxlZEJ1Y2tldHNbXCIxLTNkYXlzXCJdW2ldKTtcclxuICAgICAgICBpZiAoaW50ZXJsZWF2ZWQubGVuZ3RoID49IGxpbWl0KSBicmVhaztcclxuICAgICAgICBpZiAoc2h1ZmZsZWRCdWNrZXRzW1wiMy03ZGF5c1wiXVtpXSkgaW50ZXJsZWF2ZWQucHVzaChzaHVmZmxlZEJ1Y2tldHNbXCIzLTdkYXlzXCJdW2ldKTtcclxuICAgICAgICBpZiAoaW50ZXJsZWF2ZWQubGVuZ3RoID49IGxpbWl0KSBicmVhaztcclxuICAgICAgICBpZiAoc2h1ZmZsZWRCdWNrZXRzW1wiNytkYXlzXCJdW2ldKSBpbnRlcmxlYXZlZC5wdXNoKHNodWZmbGVkQnVja2V0c1tcIjcrZGF5c1wiXVtpXSk7XHJcbiAgICAgICAgaWYgKGludGVybGVhdmVkLmxlbmd0aCA+PSBsaW1pdCkgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHdlIHN0aWxsIGhhdmUgc3BhY2UsIGZpbGwgd2l0aCByZW1haW5pbmcgYXBwc1xyXG4gICAgICBjb25zdCByZW1haW5pbmcgPSBbXHJcbiAgICAgICAgLi4uc2h1ZmZsZWRCdWNrZXRzW1wiMC0xZGF5XCJdLnNsaWNlKG1heExlbmd0aCksXHJcbiAgICAgICAgLi4uc2h1ZmZsZWRCdWNrZXRzW1wiMS0zZGF5c1wiXS5zbGljZShtYXhMZW5ndGgpLFxyXG4gICAgICAgIC4uLnNodWZmbGVkQnVja2V0c1tcIjMtN2RheXNcIl0uc2xpY2UobWF4TGVuZ3RoKSxcclxuICAgICAgICAuLi5zaHVmZmxlZEJ1Y2tldHNbXCI3K2RheXNcIl0uc2xpY2UobWF4TGVuZ3RoKSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgYXBwIG9mIHJlbWFpbmluZykge1xyXG4gICAgICAgIGlmIChpbnRlcmxlYXZlZC5sZW5ndGggPj0gbGltaXQpIGJyZWFrO1xyXG4gICAgICAgIGlmICghaW50ZXJsZWF2ZWQuZmluZCgoYSkgPT4gYS5pZCA9PT0gYXBwLmlkKSkge1xyXG4gICAgICAgICAgaW50ZXJsZWF2ZWQucHVzaChhcHApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgYXBwcyA9IGludGVybGVhdmVkLnNsaWNlKDAsIGxpbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS5taW5pQXBwLmNvdW50KHsgd2hlcmUgfSk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgYXBwczogYXBwcy5tYXAoKGFwcCkgPT4gKHtcclxuICAgICAgICAuLi5hcHAsXHJcbiAgICAgICAgdG9wQmFzZVJhbms6IGFwcC50b3BCYXNlUmFuayxcclxuICAgICAgICBhdXRvVXBkYXRlZDogYXBwLmF1dG9VcGRhdGVkLFxyXG4gICAgICAgIGNvbnRyYWN0VmVyaWZpZWQ6IGFwcC5jb250cmFjdFZlcmlmaWVkLFxyXG4gICAgICAgIGRldmVsb3BlclRhZ3M6IGFwcC5kZXZlbG9wZXJUYWdzIHx8IFtdLFxyXG4gICAgICB9KSksXHJcbiAgICAgIHRvdGFsLFxyXG4gICAgICBsaW1pdCxcclxuICAgICAgb2Zmc2V0LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkdldCBhcHBzIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAvLyBSZXR1cm4gZW1wdHkgYXJyYXkgaW5zdGVhZCBvZiBlcnJvciB0byBwcmV2ZW50IFVJIGJyZWFrYWdlXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBhcHBzOiBbXSxcclxuICAgICAgdG90YWw6IDAsXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICBvZmZzZXQsXHJcbiAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJuZXh0VXJsIiwic2VhcmNoIiwiZ2V0IiwiY2F0ZWdvcnkiLCJ1bmRlZmluZWQiLCJ0YWciLCJzb3J0IiwibGltaXRQYXJhbSIsIm9mZnNldFBhcmFtIiwibGltaXQiLCJwYXJzZUludCIsIm9mZnNldCIsIndoZXJlIiwic3RhdHVzIiwic2VhcmNoTG93ZXIiLCJ0b0xvd2VyQ2FzZSIsIk9SIiwibmFtZSIsImNvbnRhaW5zIiwibW9kZSIsImRlc2NyaXB0aW9uIiwidGFncyIsImhhcyIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJzaG91bGRSYW5kb21pemUiLCJpbnN0YWxscyIsInJhdGluZ0F2ZXJhZ2UiLCJhcHBzIiwibWluaUFwcCIsImZpbmRNYW55IiwidGFrZSIsIk1hdGgiLCJtaW4iLCJza2lwIiwiaW5jbHVkZSIsImRldmVsb3BlciIsInNlbGVjdCIsImlkIiwid2FsbGV0IiwiYXZhdGFyIiwidmVyaWZpZWQiLCJub3ciLCJEYXRlIiwib25lRGF5IiwidGhyZWVEYXlzIiwic2V2ZW5EYXlzIiwiYnVja2V0cyIsImZvckVhY2giLCJhcHAiLCJhZ2UiLCJnZXRUaW1lIiwicHVzaCIsInNodWZmbGUiLCJhcnJheSIsInNodWZmbGVkIiwiaSIsImxlbmd0aCIsImoiLCJmbG9vciIsInJhbmRvbSIsImludGVybGVhdmVkIiwibWF4TGVuZ3RoIiwibWF4Iiwic2h1ZmZsZWRCdWNrZXRzIiwicmVtYWluaW5nIiwic2xpY2UiLCJmaW5kIiwiYSIsInRvdGFsIiwiY291bnQiLCJqc29uIiwibWFwIiwidG9wQmFzZVJhbmsiLCJhdXRvVXBkYXRlZCIsImNvbnRyYWN0VmVyaWZpZWQiLCJkZXZlbG9wZXJUYWdzIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/apps/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\"\n    ] // Only log actual errors, not connection issues\n     : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxrQkFBa0JDO0FBRWpCLE1BQU1DLFNBQ1hGLGdCQUFnQkUsTUFBTSxJQUN0QixJQUFJSCx3REFBWUEsQ0FBQztJQUNmSSxLQUFLQyxLQUFzQyxHQUN2QztRQUFDO0tBQVEsQ0FBQyxnREFBZ0Q7T0FDMUQsQ0FBUztBQUNmLEdBQUc7QUFFTCxJQUFJQSxJQUFxQyxFQUFFSixnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYXJjYXN0ZXItYmFzZS1odWIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYT86IFByaXNtYUNsaWVudCB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xyXG4gIG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gICAgbG9nOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiIFxyXG4gICAgICA/IFtcImVycm9yXCJdIC8vIE9ubHkgbG9nIGFjdHVhbCBlcnJvcnMsIG5vdCBjb25uZWN0aW9uIGlzc3Vlc1xyXG4gICAgICA6IFtcImVycm9yXCJdLFxyXG4gIH0pO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWwiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fapps%2Froute&page=%2Fapi%2Fapps%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fapps%2Froute.ts&appDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cbase%5Cstore%5Cfarcaster-base-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();