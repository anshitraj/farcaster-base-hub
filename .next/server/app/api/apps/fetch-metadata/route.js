"use strict";(()=>{var e={};e.id=5043,e.ids=[5043],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},12447:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>p});var o=r(49303),i=r(88716),n=r(60670),s=r(87070),l=r(88349);async function p(e){try{let t=e.nextUrl.searchParams.get("url");if(!t)return s.NextResponse.json({error:"URL parameter is required"},{status:400});let r=await (0,l.r)(t);if(!r)return s.NextResponse.json({metadata:null,message:"No farcaster.json found or invalid format"},{status:200});return s.NextResponse.json({metadata:r})}catch(e){return console.error("Fetch metadata error:",e),s.NextResponse.json({error:"Failed to fetch metadata",metadata:null},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/apps/fetch-metadata/route",pathname:"/api/apps/fetch-metadata",filename:"route",bundlePath:"app/api/apps/fetch-metadata/route"},resolvedPagePath:"E:\\base\\store\\farcaster-base-hub\\src\\app\\api\\apps\\fetch-metadata\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:m}=c,h="/api/apps/fetch-metadata/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},88349:(e,t,r)=>{async function a(e){try{let t=e.trim();t.startsWith("http")||(t=`https://${t}`),t=t.replace(/\/$/,"");let r=`${t}/.well-known/farcaster.json`,a=await fetch(r,{headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)return null;let o=await a.json(),i=o.frame||o.miniapp||o,n=i.iconUrl||i.icon||o.icon||null;if(n){if(n.startsWith("/"))n=new URL(t).origin+n;else if(!n.startsWith("http")){let e=new URL(t).origin;n=`${e}/${n}`}}if(!n)try{let e=`${t}/icon.png`;(await fetch(e,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok&&(n=e)}catch(e){console.log("icon.png not found at /icon.png")}let s=i.homeUrl||o.url||t,l=i.name||o.name,p=i.description||o.description,c=i.subtitle||o.subtitle,u=i.tags||o.tags||[],d=i.primaryCategory||o.category||o.primaryCategory,m=i.screenshotUrls||o.screenshots||[],h=i.webhookUrl||i.frameUrl||o.frameUrl,g=i.heroImageUrl||i.imageUrl||o.ogImage||o["og-image"]||o.og_image;if(Array.isArray(m)&&m.length>0){let e=new URL(t).origin;m=m.map(t=>t?t.startsWith("/")?e+t:t.startsWith("http")?t:`${e}/${t}`:t).filter(Boolean)}return{name:l,icon:n||void 0,iconUrl:n||void 0,screenshots:Array.isArray(m)?m:void 0,screenshotUrls:Array.isArray(m)?m:void 0,category:d||void 0,primaryCategory:d||void 0,description:p||void 0,subtitle:c||void 0,url:s||t,homeUrl:s||t,frameUrl:h||void 0,ogImage:g||void 0,tags:Array.isArray(u)?u:void 0,developer:o.developer||void 0,owner:o.owner||o.owners||void 0,owners:o.owners||o.owner||void 0,frame:i||void 0}}catch(e){return console.error("Error fetching farcaster.json:",e),null}}function o(e){let t=JSON.stringify(e),r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return r.toString()}r.d(t,{g:()=>o,r:()=>a})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972],()=>r(12447));module.exports=a})();