"use strict";(()=>{var e={};e.id=7544,e.ids=[7544],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},87973:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>A,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>d});var a=r(49303),s=r(88716),o=r(60670),i=r(87070),p=r(75748),c=r(90528);async function d(e){try{await (0,c.Kd)();let e=(await p._.miniApp.findMany({include:{developer:{select:{name:!0,wallet:!0}}},orderBy:{createdAt:"desc"}})).map(e=>[u(e.name),u(e.developer?.name||"Unknown"),u(e.developer?.wallet||""),u(e.url),u(e.baseMiniAppUrl||""),u(e.farcasterUrl||""),u(e.category),u(e.developerTags.join(", ")||""),u(e.contractAddress||""),e.contractVerified?"Yes":"No",e.verified?"Yes":"No",u(e.status),e.launchCount.toString(),e.uniqueUsers.toString(),e.clicks.toString(),e.installs.toString(),e.ratingAverage.toFixed(2),e.ratingCount.toString(),e.popularityScore.toString(),e.createdAt.toISOString(),e.updatedAt.toISOString(),e.lastUpdatedAt?e.lastUpdatedAt.toISOString():"",u(e.notesToAdmin||"")]),t=["App Name,Developer Name,Developer Wallet,URL,Base Mini App URL,Farcaster URL,Category,Tags,Contract Address,Contract Verified,App Verified,Status,Launch Count,Unique Users,Clicks,Installs,Rating Average,Rating Count,Popularity Score,Created At,Last Updated,Auto Updated At,Notes to Admin",...e.map(e=>e.join(","))].join("\n");return new i.NextResponse(t,{headers:{"Content-Type":"text/csv","Content-Disposition":`attachment; filename="mini-apps-export-${new Date().toISOString().split("T")[0]}.csv"`}})}catch(e){if("Admin access required"===e.message)return i.NextResponse.json({error:"Admin access required"},{status:403});return console.error("CSV export error:",e),i.NextResponse.json({error:"Failed to export CSV"},{status:500})}}function u(e){return e?e.includes(",")||e.includes('"')||e.includes("\n")?`"${e.replace(/"/g,'""')}"`:e:""}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/apps/export-csv/route",pathname:"/api/admin/apps/export-csv",filename:"route",bundlePath:"app/api/admin/apps/export-csv/route"},resolvedPagePath:"E:\\base\\store\\farcaster-base-hub\\src\\app\\api\\admin\\apps\\export-csv\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:x}=l,v="/api/admin/apps/export-csv/route";function A(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[9276,5972,528],()=>r(87973));module.exports=n})();