"use strict";(()=>{var e={};e.id=3440,e.ids=[3440],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},92048:e=>{e.exports=require("fs")},20629:e=>{e.exports=require("fs/promises")},55315:e=>{e.exports=require("path")},78346:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>j,patchFetch:()=>h,requestAsyncStorage:()=>x,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>c});var a=t(49303),i=t(88716),o=t(60670),n=t(87070),p=t(90528),u=t(20629),d=t(55315),l=t(92048);async function c(e){try{await (0,p.Kd)();let r=await e.formData(),t=r.get("file"),s=r.get("type");if(!t)return n.NextResponse.json({error:"No file provided"},{status:400});if(!s||!["icon","header","screenshot"].includes(s))return n.NextResponse.json({error:"Invalid type. Must be 'icon', 'header', or 'screenshot'"},{status:400});if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif","image/svg+xml"].includes(t.type))return n.NextResponse.json({error:"Invalid file type. Only images are allowed (JPEG, PNG, WebP, GIF, SVG)"},{status:400});if(t.size>5242880)return n.NextResponse.json({error:"File size too large. Maximum size is 5MB"},{status:400});let a=(0,d.join)(process.cwd(),"public","uploads");(0,l.existsSync)(a)||await (0,u.mkdir)(a,{recursive:!0});let i=Date.now(),o=Math.random().toString(36).substring(2,15),c=t.name.split(".").pop()||"png",m=`${s}-${i}-${o}.${c}`,x=(0,d.join)(a,m),g=await t.arrayBuffer(),f=Buffer.from(g);await (0,u.writeFile)(x,f);let j=`/uploads/${m}`;return n.NextResponse.json({success:!0,url:j,filename:m})}catch(e){if("Admin access required"===e.message)return n.NextResponse.json({error:"Admin access required"},{status:403});return console.error("Upload error:",e),n.NextResponse.json({error:"Failed to upload file"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/upload/route",pathname:"/api/admin/upload",filename:"route",bundlePath:"app/api/admin/upload/route"},resolvedPagePath:"E:\\base\\store\\farcaster-base-hub\\src\\app\\api\\admin\\upload\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:f}=m,j="/api/admin/upload/route";function h(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,5972,528],()=>t(78346));module.exports=s})();