"use strict";(()=>{var e={};e.id=7320,e.ids=[7320],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},83460:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>c});var a={};r.r(a),r.d(a,{GET:()=>n});var s=r(49303),o=r(88716),p=r(60670),l=r(87070),i=r(75748);async function n(e){try{let t=e.nextUrl.searchParams,r=parseInt(t.get("limit")||"50",10),a=t.get("sort")||"apps",s=[...(await i._.developer.findMany({include:{apps:{where:{status:"approved"},select:{id:!0,clicks:!0,installs:!0}},badges:{select:{id:!0}},_count:{select:{apps:{where:{status:"approved"}},badges:!0}}}})).map(e=>{let t=e.apps.reduce((e,t)=>e+t.clicks,0),r=e.apps.reduce((e,t)=>e+t.installs,0);return{id:e.id,wallet:e.wallet,name:e.name,avatar:e.avatar,bio:e.bio,verified:e.verified,totalXP:e.totalXP||0,developerLevel:e.developerLevel||1,appCount:e._count.apps,badgeCount:e._count.badges,totalClicks:t,totalInstalls:r,createdAt:e.createdAt}})];"apps"===a?s.sort((e,t)=>t.appCount-e.appCount):"xp"===a?s.sort((e,t)=>t.totalXP-e.totalXP):"newest"===a&&s.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime());let o=(s=s.filter(e=>e.appCount>0)).slice(0,r);return l.NextResponse.json({developers:o,total:s.length})}catch(e){return console.error("Get developers error:",e),l.NextResponse.json({developers:[],total:0,error:"Failed to fetch developers"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/developers/route",pathname:"/api/developers",filename:"route",bundlePath:"app/api/developers/route"},resolvedPagePath:"E:\\base\\store\\farcaster-base-hub\\src\\app\\api\\developers\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:c,serverHooks:v}=d,m="/api/developers/route";function g(){return(0,p.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:c})}},75748:(e,t,r)=>{r.d(t,{_:()=>s});var a=r(53524);let s=global.prisma??new a.PrismaClient({log:["error"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972],()=>r(83460));module.exports=a})();