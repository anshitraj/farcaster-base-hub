"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{7178:function(e,t,a){a.d(t,{Z:function(){return j}});var s=a(7437),i=a(2265),n=a(8930),r=a(6865),l=a(2381),o=a(277),d=a(3448);let c=o.fC,u=o.xz,f=o.h_,p=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.aV,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i,ref:t})});p.displayName=o.aV.displayName;let m=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsxs)(f,{children:[(0,s.jsx)(p,{}),(0,s.jsx)(o.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i})]})});m.displayName=o.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="AlertDialogHeader";let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};g.displayName="AlertDialogFooter";let h=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold",a),...i})});h.displayName=o.Dx.displayName;let v=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...i})});v.displayName=o.dk.displayName;let w=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.aU,{ref:t,className:(0,d.cn)((0,l.d)(),a),...i})});w.displayName=o.aU.displayName;let N=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.$j,{ref:t,className:(0,d.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...i})});N.displayName=o.$j.displayName;var b=a(3340),y=a(9376);function j(e){let{appId:t,appName:a,onDeleted:o}=e,[d,f]=(0,i.useState)(!1),[p,j]=(0,i.useState)(!1),{toast:A}=(0,b.pm)(),E=(0,y.useRouter)(),T=async()=>{f(!0);try{let e=await fetch("/api/apps/".concat(t),{method:"DELETE",credentials:"include"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete app")}A({title:"App Deleted",description:"".concat(a," has been deleted successfully.")}),j(!1),o?o():E.push("/dashboard")}catch(e){A({title:"Delete Failed",description:e.message||"Failed to delete app. Please try again.",variant:"destructive"})}finally{f(!1)}};return(0,s.jsxs)(c,{open:p,onOpenChange:j,children:[(0,s.jsx)(u,{asChild:!0,children:(0,s.jsxs)(l.z,{variant:"destructive",size:"sm",className:"gap-2",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4"}),"Delete App"]})}),(0,s.jsxs)(m,{className:"glass-card border-white/10",children:[(0,s.jsxs)(x,{children:[(0,s.jsxs)(h,{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)(r.Z,{className:"w-5 h-5"}),"Delete App?"]}),(0,s.jsxs)(v,{className:"space-y-2 pt-2",children:[(0,s.jsxs)("p",{className:"font-semibold text-foreground",children:['Are you sure you want to delete "',a,'"?']}),(0,s.jsxs)("div",{className:"bg-destructive/10 border border-destructive/30 rounded-lg p-3 mt-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-destructive mb-2",children:"⚠️ This action cannot be undone!"}),(0,s.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"All ratings and reviews will be permanently deleted"}),(0,s.jsx)("li",{children:"All XP and earnings from this app will be lost"}),(0,s.jsx)("li",{children:"All click and install statistics will be deleted"}),(0,s.jsx)("li",{children:"This app will be removed from the store"})]})]})]})]}),(0,s.jsxs)(g,{children:[(0,s.jsx)(N,{disabled:d,children:"Cancel"}),(0,s.jsx)(w,{onClick:T,disabled:d,className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:d?"Deleting...":"Delete App"})]})]})]})}},9105:function(e,t,a){a.d(t,{Z:function(){return d}});var s=a(7437),i=a(2265),n=a(8997),r=a(8239),l=a(3340),o=a(828);function d(e){let{appId:t,className:a="",size:d="md"}=e,[c,u]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!0),[m,x]=(0,i.useState)(!1),{toast:g}=(0,l.pm)(),{isAuthenticated:h,loading:v}=(0,o.a)(),w={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};(0,i.useEffect)(()=>{if(v||!h){u(!1),p(!1);return}let e=!0;async function a(){try{let a=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{credentials:"include"});if(!e)return;if(a.ok){let e=await a.json();u(e.isFavorited||!1)}else 401===a.status&&u(!1)}catch(t){if(!e)return;console.error("Error checking favorite status:",t)}finally{e&&p(!1)}}t&&a();let s=()=>{e&&(u(!1),p(!1))};return window.addEventListener("walletDisconnected",s),()=>{e=!1,window.removeEventListener("walletDisconnected",s)}},[t,h,v]);let N=async e=>{if(e.preventDefault(),e.stopPropagation(),m||f||!h){h||g({title:"Authentication required",description:"Please connect your wallet to add favorites",variant:"destructive"});return}x(!0);try{if(c){let e=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{method:"DELETE",credentials:"include"});if(e.ok)u(!1),g({title:"Removed from favorites",description:"App removed from your favorites"});else if(401===e.status)g({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else throw Error("Failed to remove from favorites")}else{let e=await fetch("/api/collections/items",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({miniAppId:t,collectionType:"favorites"})});if(e.ok)u(!0),g({title:"Added to favorites",description:"App added to your favorites"});else if(401===e.status)g({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else{var a;let t=await e.json().catch(()=>({}));if(null===(a=t.error)||void 0===a?void 0:a.includes("already"))u(!0);else throw Error(t.error||"Failed to add to favorites")}}}catch(e){console.error("Error toggling favorite:",e),g({title:"Error",description:e.message||"Failed to update favorites",variant:"destructive"})}finally{x(!1)}};return f?(0,s.jsx)("div",{className:"".concat(w[d]," rounded-full bg-gray-800 animate-pulse ").concat(a)}):(0,s.jsx)(r.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:N,className:"".concat(a," transition-all duration-300"),"aria-label":c?"Remove from favorites":"Add to favorites",children:(0,s.jsx)(n.Z,{className:"".concat(w[d]," transition-all duration-300 ").concat(c?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-400")})})}},1756:function(e,t,a){var s=a(7437),i=a(2381),n=a(3448);t.Z=e=>{let{className:t,glowColor:a="gradient",variant:r="gradient",...l}=e,o="",d="";return"gradient"===r?(o="btn-gradient",d="glow-gradient"):"blue"===a?(o="bg-base-blue hover:bg-base-blue-soft text-white",d="glow-base-blue"):"purple"===a?(o="bg-purple hover:bg-purple/90 text-white",d="glow-purple"):(o="btn-gradient",d="glow-gradient"),(0,s.jsx)(i.z,{className:(0,n.cn)("transition-all duration-300 font-medium",o,d,"hover:scale-[1.02] active:scale-[0.98]",t),...l})}},3386:function(e,t,a){a.d(t,{Z:function(){return l}});var s=a(7437),i=a(1817),n=a(3448);function r(e){let{size:t="md",className:a,text:r}=e;return(0,s.jsxs)("div",{className:(0,n.cn)("flex flex-col items-center justify-center gap-2",a),children:[(0,s.jsx)(i.Z,{className:(0,n.cn)("animate-spin text-base-blue",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t])}),r&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]})}function l(e){let{message:t="Loading..."}=e;return(0,s.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pt-20 px-4 pb-24",children:(0,s.jsx)("div",{className:"max-w-screen-md mx-auto flex items-center justify-center py-20",children:(0,s.jsx)(r,{size:"lg",text:t})})})}},3675:function(e,t,a){a.d(t,{g:function(){return r}});var s=a(7437),i=a(2265),n=a(3448);let r=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});r.displayName="Textarea"},4371:function(e,t,a){a.d(t,{L9:function(){return n},Z0:function(){return i},m$:function(){return r}});var s=a(257);function i(e){window.gtag&&window.gtag("config",s.env.NEXT_PUBLIC_GA_ID,{page_path:e}),window.plausible&&window.plausible("pageview"),s.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT&&fetch(s.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pageview",path:e,timestamp:new Date().toISOString()})}).catch(()=>{})}function n(e){let{action:t,category:a,label:i,value:n}=e;window.gtag&&window.gtag("event",t,{event_category:a,event_label:i,value:n}),window.plausible&&window.plausible(t,{props:{category:a,label:i,value:n}}),s.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT&&fetch(s.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"event",action:t,category:a,label:i,value:n,timestamp:new Date().toISOString()})}).catch(()=>{})}function r(e,t){n({action:t,category:"app",label:e})}}}]);