(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{536:function(e,a,t){Promise.resolve().then(t.bind(t,5295))},3276:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9205).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5295:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return D}});var s=t(7437),i=t(2265),r=t(9376),l=t(7648),n=t(3145),c=t(9820),o=t(6595);let d=(0,t(9205).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var m=t(8239),p=e=>{let{userName:a,userAvatar:t,rating:i,comment:r,date:l,helpful:n}=e;return(0,s.jsx)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,s.jsx)(c.Zb,{className:"glass-card",children:(0,s.jsx)(c.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("img",{src:t,alt:a,className:"w-12 h-12 rounded-full bg-background-secondary p-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold",children:a}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:5}).map((e,a)=>(0,s.jsx)(o.Z,{className:"w-4 h-4 ".concat(a<i?"fill-base-cyan text-base-cyan":"text-muted-foreground")},a))})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:r}),(0,s.jsxs)("button",{className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-base-blue transition-colors",children:[(0,s.jsx)(d,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Helpful (",n,")"]})]})]})]})})})})},x=t(3675),h=t(1756),u=t(3340),f=e=>{let{appId:a,onReviewSubmitted:t}=e,{toast:r}=(0,u.pm)(),[l,n]=(0,i.useState)(0),[d,p]=(0,i.useState)(0),[f,v]=(0,i.useState)(""),[b,j]=(0,i.useState)(!1),g=async e=>{if(e.preventDefault(),0===l){r({title:"Error",description:"Please select a rating",variant:"destructive"});return}j(!0);try{let e=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({miniAppId:a,rating:l,comment:f.trim()||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to submit review");if(s.error&&s.error.includes("cannot rate your own"))throw Error("You cannot rate your own app");s.pointsAwarded&&s.pointsAwarded>0?r({title:"Review Submitted! \uD83C\uDF89",description:"You earned ".concat(s.pointsAwarded," points for this review!")}):r({title:"Success!",description:"Your review has been submitted."}),n(0),v(""),window.dispatchEvent(new CustomEvent("pointsUpdated")),t&&t()}catch(e){r({title:"Error",description:e.message||"Failed to submit review. Please try again.",variant:"destructive"})}finally{j(!1)}};return(0,s.jsx)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,s.jsxs)(c.Zb,{className:"glass-card",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c.ll,{children:"Write a Review"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-base-cyan/10 border border-base-cyan/30",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 text-base-cyan fill-base-cyan"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-base-cyan",children:"+100 Points"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Rate this app and earn 100 points! \uD83C\uDF81"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Your Rating"}),(0,s.jsx)("div",{className:"flex gap-2",children:Array.from({length:5}).map((e,a)=>(0,s.jsx)("button",{type:"button",onClick:()=>n(a+1),onMouseEnter:()=>p(a+1),onMouseLeave:()=>p(0),className:"transition-transform hover:scale-110",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 ".concat(a<(d||l)?"fill-base-cyan text-base-cyan":"text-muted-foreground")})},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Your Review"}),(0,s.jsx)(x.g,{placeholder:"Share your experience with this app...",value:f,onChange:e=>v(e.target.value),className:"glass-card focus-visible:ring-base-blue min-h-[120px]"})]}),(0,s.jsx)(h.Z,{type:"submit",className:"w-full",disabled:b,children:b?"Submitting...":"Submit Review"})]})})]})})},v=t(4315),b=t(3386),j=t(7178),g=t(9174),y=t(2934),N=t(8906),w=t(3276),Z=t(6362);let k=e=>"base://app?url=".concat(encodeURIComponent(e)),A=e=>"farcaster://miniapp?url=".concat(encodeURIComponent(e));var S=t(1256),E=t(9853),C=t(8121),R=t(9040),U=t(9105),B=t(3284),P=t(4371);function D(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),{toast:t}=(0,u.pm)(),o=e.id,[d,x]=(0,i.useState)(null),[h,D]=(0,i.useState)([]),[F,I]=(0,i.useState)(!0),[O,Y]=(0,i.useState)(!1),[z,T]=(0,i.useState)([]);(0,i.useEffect)(()=>{o&&(0,P.Z0)("/apps/".concat(o))},[o]),(0,i.useEffect)(()=>{async function e(){try{let s=await fetch("/api/apps/".concat(o));if(s.ok){let i=await s.json();if(x(i.app),D(i.reviews||[]),i.app){var e,a,t;(0,P.m$)(o,"view");try{let e=await fetch("/api/auth/wallet",{method:"GET",credentials:"include"});if(e.ok){let t=await e.json();t.wallet&&(null===(a=i.app.developer)||void 0===a?void 0:a.wallet)&&Y(t.wallet.toLowerCase()===i.app.developer.wallet.toLowerCase())}}catch(e){Y(!1)}if(null===(e=i.app.developer)||void 0===e?void 0:e.wallet)try{let e=await fetch("/api/developers/".concat(encodeURIComponent(i.app.developer.wallet)));if(e.ok){let a=await e.json(),s=((null===(t=a.developer)||void 0===t?void 0:t.apps)||[]).filter(e=>e.id!==o);T(s.slice(0,6))}}catch(e){console.error("Error fetching developer apps:",e),T([])}}}}catch(e){console.error("Error fetching app:",e)}finally{I(!1)}}o&&e()},[o]);let L=async e=>{let a;if(d){try{let e=await fetch("/api/xp/launch",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({appId:o})});if(e.ok){let a=await e.json();(a.xpEarned||0)>0&&a.message&&t({title:"XP Earned!",description:a.message})}else if(429===e.status){let a=await e.json();t({title:"Cooldown Active",description:a.message||"You can earn XP again in 5 minutes",variant:"default"})}}catch(e){console.error("Error awarding launch XP:",e)}try{await fetch("/api/apps/".concat(o,"/click"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:"open"})}),(0,P.m$)(o,"open")}catch(e){console.error("Error logging event:",e)}a="base"===e?d.baseMiniAppUrl||k(d.url):d.farcasterUrl||A(d.url),window.location.href=a}};return F?(0,s.jsx)(b.Z,{message:"Loading app..."}):d?(0,s.jsxs)("div",{className:"min-h-screen bg-[#0B0F19] pb-24",children:[(0,s.jsx)(B.Z,{}),d.headerImageUrl&&(0,s.jsxs)("div",{className:"w-full h-48 md:h-64 lg:h-80 relative overflow-hidden",children:[(0,s.jsx)("img",{src:d.headerImageUrl,alt:"".concat(d.name," header"),className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0B0F19] via-[#0B0F19]/50 to-transparent"})]}),(0,s.jsx)("div",{className:"pt-8 pb-8",children:(0,s.jsxs)("div",{className:"max-w-screen-md mx-auto px-4",children:[(0,s.jsxs)(m.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[d.iconUrl&&(0,s.jsx)(n.default,{src:d.iconUrl,alt:d.name,width:120,height:120,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl bg-background-secondary p-3 shadow-2xl flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 relative",children:[(0,s.jsx)("div",{className:"absolute -top-2 right-0 md:relative md:top-auto md:right-auto md:ml-auto z-10",children:(0,s.jsx)(U.Z,{appId:d.id,size:"lg",className:"md:ml-auto"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap pr-12 md:pr-0",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:d.name}),d.verified&&(0,s.jsx)(E.Z,{type:"app"})]}),d.developer&&(0,s.jsxs)(l.default,{href:"/developers/".concat(d.developer.wallet),className:"flex items-center gap-1.5 text-sm text-muted-foreground hover:text-base-blue transition-colors mb-3",children:[(0,s.jsx)("span",{children:d.developer.name||"Anonymous Developer"}),d.developer.verified&&(0,s.jsx)(E.Z,{type:"developer",iconOnly:!0,size:"md"}),!d.developer.verified&&d.developer.badges&&d.developer.badges.length>0&&(0,s.jsx)(y.Z,{className:"w-4 h-4 text-base-blue"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)(S.Z,{rating:d.ratingAverage||0,size:16,showNumber:!0}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[d.ratingCount||0," reviews"]}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[d.installs||0," installs"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(g.C,{variant:"secondary",className:"text-xs",children:d.category}),d.contractVerified&&(0,s.jsxs)(g.C,{className:"text-xs bg-green-600/20 text-green-400 border-green-600/50",children:[(0,s.jsx)(N.Z,{className:"w-3 h-3 mr-1"}),"Contract Verified"]}),d.topBaseRank&&(0,s.jsx)(C.Z,{rank:d.topBaseRank,className:"text-xs"}),d.autoUpdated&&(0,s.jsx)(R.Z,{className:"text-xs"})]})]})]}),O&&(0,s.jsx)("div",{className:"mb-4 flex justify-end",children:(0,s.jsx)(j.Z,{appId:o,appName:d.name,onDeleted:()=>{a.push("/dashboard")}})}),(0,s.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>L("base"),className:"flex-1 bg-base-blue hover:bg-base-blue/90 text-white px-6 py-3 rounded-full font-medium flex items-center justify-center gap-2 min-h-[48px] transition-colors shadow-lg shadow-base-blue/30",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5"}),"Open in Base"]}),(0,s.jsxs)("button",{onClick:()=>L("farcaster"),className:"flex-1 bg-base-cyan/20 hover:bg-base-cyan/30 text-base-cyan border border-base-cyan/50 px-6 py-3 rounded-full font-medium flex items-center justify-center gap-2 min-h-[48px] transition-colors",children:[(0,s.jsx)(Z.Z,{className:"w-5 h-5"}),"Farcaster"]})]})]}),(0,s.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"glass-card p-6 mb-6 rounded-2xl",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"About this Mini App"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:d.description})]}),(0,s.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.15},className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)(c.Zb,{className:"glass-card text-center p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold mb-1",children:(d.ratingAverage||0)%1==0?(d.ratingAverage||0).toString():(d.ratingAverage||0).toFixed(1)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Rating"})]}),(0,s.jsxs)(c.Zb,{className:"glass-card text-center p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold mb-1",children:d.installs||0}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Installs"})]}),(0,s.jsxs)(c.Zb,{className:"glass-card text-center p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold mb-1",children:d.clicks||0}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Clicks"})]})]}),d.developer&&(0,s.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold",children:["More from ",d.developer.name||"Developer"]}),(0,s.jsx)(l.default,{href:"/developers/".concat(d.developer.wallet),className:"text-base-blue text-sm font-medium",children:"View All →"})]}),z.length>0?(0,s.jsx)(v.Z,{apps:z,variant:"horizontal"}):(0,s.jsx)(c.Zb,{className:"glass-card p-4 text-center",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No other apps from this developer yet."})})]}),(0,s.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.25},className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["Ratings & Reviews (",d.ratingCount||0,")"]}),!O&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(f,{appId:o,onReviewSubmitted:async()=>{let e=await fetch("/api/apps/".concat(o));if(e.ok){let a=await e.json();x(a.app),D(a.reviews||[])}}})}),O&&(0,s.jsx)(c.Zb,{className:"glass-card p-4 mb-6",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"You cannot rate your own app."})}),(0,s.jsx)("div",{className:"space-y-4",children:h.length>0?h.map(e=>{var a,t;let i=e.createdAt?"string"==typeof e.createdAt?new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):e.createdAt.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown date";return(0,s.jsx)(p,{userName:(null===(a=e.developerReviewer)||void 0===a?void 0:a.name)||"Anonymous",userAvatar:(null===(t=e.developerReviewer)||void 0===t?void 0:t.avatar)||"https://via.placeholder.com/48",rating:e.rating,comment:e.comment||"",date:i,helpful:0},e.id)}):(0,s.jsx)(c.Zb,{className:"glass-card p-6 text-center",children:(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"No reviews yet. Be the first to review!"})})})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-[#0B0F19] pt-8 px-4 pb-24",children:[(0,s.jsx)(B.Z,{}),(0,s.jsxs)("div",{className:"max-w-screen-md mx-auto text-center py-20",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"App Not Found"}),(0,s.jsx)(l.default,{href:"/apps",className:"text-base-blue hover:underline",children:"Back to Apps"})]})]})}},4315:function(e,a,t){"use strict";var s=t(7437);t(2265);var i=t(6694),r=t(6339);a.Z=e=>{let{apps:a,title:t,viewAllHref:l,variant:n="horizontal",showHorizontal:c=!0}=e,o=a.filter(e=>e.id);return 0===o.length?(0,s.jsxs)("div",{className:"px-4",children:[t&&(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:t}),(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8 text-sm",children:"No apps available"})]}):c&&"horizontal"===n?(0,s.jsx)(r.Z,{title:t,viewAllHref:l,children:o.map(e=>(0,s.jsx)(i.Z,{...e,variant:"horizontal",topBaseRank:e.topBaseRank,autoUpdated:e.autoUpdated},e.id))}):(0,s.jsxs)("div",{className:"px-4",children:[t&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:t}),l&&(0,s.jsx)("a",{href:l,className:"text-base-blue text-sm font-medium hover:text-base-cyan transition-colors",children:"View All →"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.map(e=>(0,s.jsx)(i.Z,{...e,variant:n,topBaseRank:e.topBaseRank,autoUpdated:e.autoUpdated},e.id))})]})}}},function(e){e.O(0,[590,648,145,209,2,892,457,484,284,99,463,971,117,744],function(){return e(e.s=536)}),_N_E=e.O()}]);