(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{6726:function(e,t,a){Promise.resolve().then(a.bind(a,5707))},2451:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},8997:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6595:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},257:function(e,t,a){"use strict";var r,n;e.exports=(null==(r=a.g.process)?void 0:r.env)&&"object"==typeof(null==(n=a.g.process)?void 0:n.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,r,n=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var l=[],c=!1,d=-1;function u(){c&&r&&(c=!1,r.length?l=r.concat(l):d=-1,l.length&&p())}function p(){if(!c){var e=o(u);c=!0;for(var t=l.length;t;){for(r=l,l=[];++d<t;)r&&r[d].run();d=-1,t=l.length}r=null,c=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];l.push(new m(e,t)),1!==l.length||c||o(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var s=a[e]={exports:{}},i=!0;try{t[e](s,s.exports,r),i=!1}finally{i&&delete a[e]}return s.exports}r.ab="//";var n=r(229);e.exports=n}()},5707:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var r=a(7437),n=a(2265),s=a(9376),i=a(7648),o=a(2451),l=a(407),c=a(2381),d=a(3448);function u(e){let{currentPage:t,totalPages:a,onPageChange:n,className:s}=e;return a<=1?null:(0,r.jsxs)("div",{className:(0,d.cn)("flex items-center justify-center gap-2",s),children:[(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>n(t-1),disabled:1===t,className:"glass-card border-white/10",children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})}),(()=>{let e=[];if(a<=5)for(let t=1;t<=a;t++)e.push(t);else if(t<=3){for(let t=1;t<=4;t++)e.push(t);e.push("..."),e.push(a)}else if(t>=a-2){e.push(1),e.push("...");for(let t=a-3;t<=a;t++)e.push(t)}else{e.push(1),e.push("...");for(let a=t-1;a<=t+1;a++)e.push(a);e.push("..."),e.push(a)}return e})().map((e,a)=>"..."===e?(0,r.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},"ellipsis-".concat(a)):(0,r.jsx)(c.z,{variant:t===e?"default":"outline",size:"sm",onClick:()=>n(e),className:(0,d.cn)("min-w-[40px]",t===e?"bg-base-blue hover:bg-base-blue/90 text-white":"glass-card border-white/10"),children:e},e)),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>n(t+1),disabled:t===a,className:"glass-card border-white/10",children:(0,r.jsx)(l.Z,{className:"w-4 h-4"})})]})}var p=a(3284),m=a(6339),f=e=>{let{categories:t,selected:a,onSelect:n}=e;return(0,r.jsxs)(m.Z,{children:[(0,r.jsx)("button",{onClick:()=>n(null),className:(0,d.cn)("px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap flex-shrink-0","card-surface hover-glow border-[hsl(var(--border))]",null===a?"bg-base-blue text-white border-base-blue glow-base-blue":"text-muted-foreground hover:text-base-blue"),children:"All"}),t.map(e=>(0,r.jsx)("button",{onClick:()=>n(e),className:(0,d.cn)("px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap flex-shrink-0","card-surface hover-glow border-[hsl(var(--border))]",a===e?"bg-base-blue text-white border-base-blue glow-base-blue":"text-muted-foreground hover:text-base-blue"),children:e},e))]})},h=a(8239),g=a(4371),x=a(2489),v=a(6595),b=a(9105),y=a(65);let w=["Finance","Tools","Social","Airdrops","Games","Memecoins","Utilities"];function N(){let e=(0,s.useSearchParams)(),t=(0,s.useRouter)(),[a,o]=(0,n.useState)(e.get("category")||null),[l,c]=(0,n.useState)(e.get("tag")||null),[d,m]=(0,n.useState)(e.get("search")||""),[N,j]=(0,n.useState)(e.get("sort")||"newest"),[T,S]=(0,n.useState)(parseInt(e.get("page")||"1",10)),[E,A]=(0,n.useState)([]),[k,L]=(0,n.useState)([]),[_,C]=(0,n.useState)(0),[P,I]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(0,g.Z0)("/apps"),o(e.get("category")||null),c(e.get("tag")||null),m(e.get("search")||""),j(e.get("sort")||"newest"),S(parseInt(e.get("page")||"1",10))},[e]),(0,n.useEffect)(()=>{(async function(){I(!0);try{let e=new URLSearchParams;a&&e.set("category",a),l&&e.set("tag",l),d.trim()&&e.set("search",d.trim()),e.set("sort",N),e.set("limit","20"),e.set("offset",((T-1)*20).toString());let t=await fetch("/api/apps?".concat(e.toString())),r=await t.json();A(r.apps||[]),C(r.total||0);let n=new Set;(r.apps||[]).forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(e=>n.add(e))}),L(Array.from(n).sort())}catch(e){console.error("Error fetching apps:",e),(0,g.L9)({action:"error",category:"apps",label:"fetch_failed"})}finally{I(!1)}})()},[a,l,d,N,T]);let Z=a=>{let r=new URLSearchParams(e.toString());a.sort&&r.set("sort",a.sort),void 0!==a.page&&(a.page>1?r.set("page",a.page.toString()):r.delete("page")),void 0!==a.category&&(a.category?r.set("category",a.category):r.delete("category")),void 0!==a.tag&&(a.tag?r.set("tag",a.tag):r.delete("tag")),t.push("/apps?".concat(r.toString()))},O=e=>{c(e),S(1),Z({tag:e,page:1})},D=Math.ceil(_/20);return(0,r.jsxs)("div",{className:"min-h-screen bg-[#0D0F1A] pb-24",children:[(0,r.jsx)(p.Z,{}),(0,r.jsx)("div",{className:"pt-8 pb-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6",style:{padding:"24px"},children:[(0,r.jsxs)(h.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-white",children:d?'Search Results for "'.concat(d,'"'):a?"".concat(a," Apps"):"All Applications"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:d?"Found ".concat(_," result").concat(1!==_?"s":""):a?"Browse all ".concat(a.toLowerCase()," mini apps"):"Browse all available mini apps"})]}),(0,r.jsx)(h.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"mb-6",children:(0,r.jsx)(f,{categories:w,selected:a,onSelect:e=>{o(e),S(1),Z({category:e,page:1})}})}),k.length>0&&(0,r.jsxs)(h.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-300",children:"Tags:"}),l&&(0,r.jsxs)("button",{onClick:()=>O(null),className:"flex items-center gap-1 px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs font-medium hover:bg-blue-500/30 transition-colors",children:[l,(0,r.jsx)(x.Z,{className:"w-3 h-3"})]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:k.slice(0,20).map(e=>(0,r.jsx)("button",{onClick:()=>O(l===e?null:e),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-300 ".concat(l===e?"bg-blue-500 text-white border border-blue-400":"bg-gray-800 text-gray-300 border border-gray-700 hover:border-gray-600 hover:text-white"),children:e},e))})]}),P?(0,r.jsx)("div",{className:"space-y-4",children:[...Array(6)].map((e,t)=>(0,r.jsx)("div",{className:"h-32 bg-gray-900 rounded-xl animate-pulse"},t))}):E.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-4",children:E.map((e,t)=>{let a=e.ratingAverage||0;return(0,r.jsx)(h.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.03*t},className:"group relative bg-gray-900 border border-gray-800 rounded-xl p-5 hover:border-gray-700 transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.iconUrl?(0,r.jsx)("div",{className:"w-20 h-20 rounded-xl bg-gray-800 p-2 border border-gray-700",children:(0,r.jsx)("img",{src:e.iconUrl,alt:e.name,className:"w-full h-full object-contain rounded-lg"})}):(0,r.jsx)("div",{className:"w-20 h-20 rounded-xl bg-gray-800 border border-gray-700 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-3xl font-bold text-gray-500",children:e.name.charAt(0)})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0 relative",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 md:relative md:top-auto md:right-auto z-10",children:(0,r.jsx)(b.Z,{appId:e.id,size:"md",className:"flex-shrink-0 md:mt-1"})}),(0,r.jsxs)("div",{className:"pr-10 md:pr-0",children:[(0,r.jsx)("div",{className:"flex items-start justify-between gap-3 mb-2",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-white mb-1 line-clamp-1",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2 leading-relaxed",children:(0,y.K)(e.description)||"No description available"})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-white",children:a%1==0?a.toString():a.toFixed(1)})]}),(0,r.jsx)(i.default,{href:"/apps/".concat(e.id),className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all duration-300",children:"Open"})]})]})]})]})},e.id)})}),D>1&&(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsx)(u,{currentPage:T,totalPages:D,onPageChange:e=>{S(e),Z({page:e}),(0,g.L9)({action:"pagination",category:"apps",label:"page_".concat(e)}),window.scrollTo({top:0,behavior:"smooth"})}})})]}):(0,r.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},className:"text-center py-20",children:(0,r.jsx)("p",{className:"text-gray-400",children:"No apps found"})})]})})]})}},9105:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(7437),n=a(2265),s=a(8997),i=a(8239),o=a(3340),l=a(828);function c(e){let{appId:t,className:a="",size:c="md"}=e,[d,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!0),[f,h]=(0,n.useState)(!1),{toast:g}=(0,o.pm)(),{isAuthenticated:x,loading:v}=(0,l.a)(),b={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};(0,n.useEffect)(()=>{if(v||!x){u(!1),m(!1);return}let e=!0;async function a(){try{let a=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{credentials:"include"});if(!e)return;if(a.ok){let e=await a.json();u(e.isFavorited||!1)}else 401===a.status&&u(!1)}catch(t){if(!e)return;console.error("Error checking favorite status:",t)}finally{e&&m(!1)}}t&&a();let r=()=>{e&&(u(!1),m(!1))};return window.addEventListener("walletDisconnected",r),()=>{e=!1,window.removeEventListener("walletDisconnected",r)}},[t,x,v]);let y=async e=>{if(e.preventDefault(),e.stopPropagation(),f||p||!x){x||g({title:"Authentication required",description:"Please connect your wallet to add favorites",variant:"destructive"});return}h(!0);try{if(d){let e=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{method:"DELETE",credentials:"include"});if(e.ok)u(!1),g({title:"Removed from favorites",description:"App removed from your favorites"});else if(401===e.status)g({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else throw Error("Failed to remove from favorites")}else{let e=await fetch("/api/collections/items",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({miniAppId:t,collectionType:"favorites"})});if(e.ok)u(!0),g({title:"Added to favorites",description:"App added to your favorites"});else if(401===e.status)g({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else{var a;let t=await e.json().catch(()=>({}));if(null===(a=t.error)||void 0===a?void 0:a.includes("already"))u(!0);else throw Error(t.error||"Failed to add to favorites")}}}catch(e){console.error("Error toggling favorite:",e),g({title:"Error",description:e.message||"Failed to update favorites",variant:"destructive"})}finally{h(!1)}};return p?(0,r.jsx)("div",{className:"".concat(b[c]," rounded-full bg-gray-800 animate-pulse ").concat(a)}):(0,r.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:y,className:"".concat(a," transition-all duration-300"),"aria-label":d?"Remove from favorites":"Add to favorites",children:(0,r.jsx)(s.Z,{className:"".concat(b[c]," transition-all duration-300 ").concat(d?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-400")})})}},6339:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(7437);function n(e){let{children:t,title:a,viewAllHref:n,className:s=""}=e;return(0,r.jsxs)("div",{className:s,children:[(a||n)&&(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 px-4",children:[a&&(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:a}),n&&(0,r.jsx)("a",{href:n,className:"text-base-blue text-sm font-medium hover:text-base-cyan transition-colors",children:"View All â†’"})]}),(0,r.jsx)("div",{className:"overflow-x-auto scroll-smooth no-scrollbar pb-2",children:(0,r.jsx)("div",{className:"flex gap-4 px-4 min-w-max",children:t})})]})}},4371:function(e,t,a){"use strict";a.d(t,{L9:function(){return s},Z0:function(){return n},m$:function(){return i}});var r=a(257);function n(e){window.gtag&&window.gtag("config",r.env.NEXT_PUBLIC_GA_ID,{page_path:e}),window.plausible&&window.plausible("pageview"),r.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT&&fetch(r.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pageview",path:e,timestamp:new Date().toISOString()})}).catch(()=>{})}function s(e){let{action:t,category:a,label:n,value:s}=e;window.gtag&&window.gtag("event",t,{event_category:a,event_label:n,value:s}),window.plausible&&window.plausible(t,{props:{category:a,label:n,value:s}}),r.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT&&fetch(r.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"event",action:t,category:a,label:n,value:s,timestamp:new Date().toISOString()})}).catch(()=>{})}function i(e,t){s({action:t,category:"app",label:e})}},65:function(e,t,a){"use strict";function r(e){if(!e)return"";let t=e.indexOf(".");return -1!==t?e.substring(0,t+1):e}a.d(t,{K:function(){return r}})}},function(e){e.O(0,[590,648,145,209,2,892,457,284,971,117,744],function(){return e(e.s=6726)}),_N_E=e.O()}]);