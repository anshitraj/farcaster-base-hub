(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79],{5567:function(e,t,i){Promise.resolve().then(i.bind(i,7483))},3327:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},875:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2451:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2135:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},9317:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8997:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},4938:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},6595:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},525:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9474:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},7483:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var a=i(7437),n=i(2265),r=i(7648),l=i(8239),s=i(8997),o=i(6595),c=i(1293),d=i(3284),u=i(9105),p=i(65);function f(){let[e,t]=(0,n.useState)([]),[i,f]=(0,n.useState)(!0),[m,h]=(0,n.useState)(!1),[v,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async function(){try{let i=await fetch("/api/collections",{credentials:"include"});if(i.ok){var e;let a=await i.json(),n=null===(e=a.collections)||void 0===e?void 0:e.find(e=>"favorites"===e.type),r=(null==n?void 0:n.items)||[];t(r)}}catch(e){console.error("Error fetching favourites:",e)}finally{f(!1)}})()},[]),(0,a.jsxs)("div",{className:"flex min-h-screen bg-black",children:[(0,a.jsx)(c.Z,{onCollapseChange:(e,t)=>{h(e),x(t)}}),(0,a.jsxs)("main",{className:"flex-1 min-h-screen w-full pb-20 lg:pb-0 transition-all duration-300 ".concat(v?"ml-0":m?"lg:ml-16 ml-0":"lg:ml-64 ml-0"),children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)("div",{className:"sticky top-[73px] z-40 bg-black/80 backdrop-blur-2xl border-b border-gray-800/50",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500/20 to-pink-500/20 flex items-center justify-center border border-red-500/30",children:(0,a.jsx)(s.Z,{className:"w-5 h-5 text-red-500 fill-red-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-extrabold text-white",children:"My Favourites"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Your saved apps"})]})]})})}),(0,a.jsx)("div",{className:"px-4 md:px-6 lg:px-8 py-6 md:py-8",children:i?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,a.jsx)("div",{className:"h-48 bg-gray-900 rounded-2xl animate-pulse"},t))}):e.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>{var i,n,s,c,d,f,m,h,v;return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05*t},className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 hover:border-gray-700 transition-all duration-300 group",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(null===(i=e.miniApp)||void 0===i?void 0:i.iconUrl)?(0,a.jsx)("div",{className:"w-16 h-16 rounded-xl bg-gray-800 p-2 flex-shrink-0",children:(0,a.jsx)("img",{src:e.miniApp.iconUrl,alt:e.miniApp.name,className:"w-full h-full object-contain rounded-lg"})}):(0,a.jsx)("div",{className:"w-16 h-16 rounded-xl bg-gray-800 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-500",children:(null===(s=e.miniApp)||void 0===s?void 0:null===(n=s.name)||void 0===n?void 0:n.charAt(0))||"?"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white line-clamp-1 flex-1",children:(null===(c=e.miniApp)||void 0===c?void 0:c.name)||"Unknown App"}),(0,a.jsx)(u.Z,{appId:(null===(d=e.miniApp)||void 0===d?void 0:d.id)||"",size:"md",className:"flex-shrink-0 mt-0.5"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2 leading-relaxed",children:(0,p.K)(null===(f=e.miniApp)||void 0===f?void 0:f.description)||(null===(m=e.miniApp)||void 0===m?void 0:m.category)||"No description available"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.default,{href:e.miniApp?"/apps/".concat(e.miniApp.id):"#",className:"px-6 py-2.5 bg-gray-800 hover:bg-gray-700 text-blue-400 rounded-lg text-sm font-semibold transition-all duration-300",children:"Open"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-yellow-400 fill-yellow-400 drop-shadow-[0_0_8px_rgba(250,204,21,0.5)]"}),(0,a.jsx)("span",{className:"text-yellow-400 font-bold text-sm drop-shadow-[0_0_8px_rgba(250,204,21,0.5)]",children:(null===(h=e.miniApp)||void 0===h?void 0:h.clicks)||(null===(v=e.miniApp)||void 0===v?void 0:v.installs)||50})]})]})]},e.id||t)})}):(0,a.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-900 flex items-center justify-center mx-auto mb-4 border border-gray-800",children:(0,a.jsx)(s.Z,{className:"w-10 h-10 text-gray-600"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"No favourites yet"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Start adding apps to your favourites!"}),(0,a.jsx)(r.default,{href:"/apps",className:"inline-block px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors",children:"Browse Apps"})]})})]})]})}},9105:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var a=i(7437),n=i(2265),r=i(8997),l=i(8239),s=i(3340),o=i(828);function c(e){let{appId:t,className:i="",size:c="md"}=e,[d,u]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!0),[m,h]=(0,n.useState)(!1),{toast:v}=(0,s.pm)(),{isAuthenticated:x,loading:y}=(0,o.a)(),g={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};(0,n.useEffect)(()=>{if(y||!x){u(!1),f(!1);return}let e=!0;async function i(){try{let i=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{credentials:"include"});if(!e)return;if(i.ok){let e=await i.json();u(e.isFavorited||!1)}else 401===i.status&&u(!1)}catch(t){if(!e)return;console.error("Error checking favorite status:",t)}finally{e&&f(!1)}}t&&i();let a=()=>{e&&(u(!1),f(!1))};return window.addEventListener("walletDisconnected",a),()=>{e=!1,window.removeEventListener("walletDisconnected",a)}},[t,x,y]);let b=async e=>{if(e.preventDefault(),e.stopPropagation(),m||p||!x){x||v({title:"Authentication required",description:"Please connect your wallet to add favorites",variant:"destructive"});return}h(!0);try{if(d){let e=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{method:"DELETE",credentials:"include"});if(e.ok)u(!1),v({title:"Removed from favorites",description:"App removed from your favorites"});else if(401===e.status)v({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else throw Error("Failed to remove from favorites")}else{let e=await fetch("/api/collections/items",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({miniAppId:t,collectionType:"favorites"})});if(e.ok)u(!0),v({title:"Added to favorites",description:"App added to your favorites"});else if(401===e.status)v({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else{var i;let t=await e.json().catch(()=>({}));if(null===(i=t.error)||void 0===i?void 0:i.includes("already"))u(!0);else throw Error(t.error||"Failed to add to favorites")}}}catch(e){console.error("Error toggling favorite:",e),v({title:"Error",description:e.message||"Failed to update favorites",variant:"destructive"})}finally{h(!1)}};return p?(0,a.jsx)("div",{className:"".concat(g[c]," rounded-full bg-gray-800 animate-pulse ").concat(i)}):(0,a.jsx)(l.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:b,className:"".concat(i," transition-all duration-300"),"aria-label":d?"Remove from favorites":"Add to favorites",children:(0,a.jsx)(r.Z,{className:"".concat(g[c]," transition-all duration-300 ").concat(d?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-400")})})}},65:function(e,t,i){"use strict";function a(e){if(!e)return"";let t=e.indexOf(".");return -1!==t?e.substring(0,t+1):e}i.d(t,{K:function(){return a}})}},function(e){e.O(0,[590,648,145,209,2,892,457,284,293,971,117,744],function(){return e(e.s=5567)}),_N_E=e.O()}]);