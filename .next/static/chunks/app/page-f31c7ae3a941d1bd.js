(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9849:function(e,t,a){Promise.resolve().then(a.bind(a,1070))},3276:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9205).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},6595:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},1070:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var i=a(7437),s=a(2265),l=a(7648),n=a(1293),r=a(3284),o=a(8239),c=a(1239),d=a(3073),m=a(2096),p=a(5805),x=a(933),u=a(3417),h=a(2106),g=a(5900),f=a(7414),b=a(525),v=a(9232),w=a(407),j=a(4371),y=a(2447),N=a(7586),k=a(6595),A=a(3276),E=a(2451),S=a(9105),C=a(65);function Z(e){var t;let{apps:a}=e,[n,r]=(0,s.useState)(0),[c,d]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{if(!c||a.length<=1)return;let e=setInterval(()=>{r(e=>(e+1)%a.length)},5e3);return()=>clearInterval(e)},[c,a.length]),!a||0===a.length)return null;let m=a[n],p=e=>{r(e),d(!1)};return(0,i.jsxs)("div",{className:"relative mb-8 group",children:[(0,i.jsx)(N.M,{mode:"wait",children:(0,i.jsxs)(o.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.5},className:"relative rounded-3xl overflow-hidden backdrop-blur-[2px] bg-white/2 shadow-[0_0_40px_rgba(80,100,255,0.15)]",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-[#11131A] to-[#080A0F] opacity-60 z-0"}),m.headerImageUrl?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:m.headerImageUrl,alt:m.name,className:"absolute inset-0 w-full h-full object-cover z-0"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/20 z-[1]"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-purple-700 opacity-90 z-0"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent z-[1]"})]}),(0,i.jsx)("div",{className:"relative p-8 md:p-12 lg:p-16 z-10",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6 md:gap-8",children:[(0,i.jsx)(o.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},whileHover:{rotate:[0,-5,5,-5,0],scale:1.1},className:"w-[104px] h-[104px] md:w-[136px] md:h-[136px] rounded-3xl bg-white/20 backdrop-blur-md p-4 shadow-2xl border border-white/30 flex-shrink-0",children:m.iconUrl?(0,i.jsx)("img",{src:m.iconUrl,alt:m.name,className:"w-full h-full object-contain rounded-2xl"}):(0,i.jsx)("div",{className:"w-full h-full rounded-2xl bg-white/20 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-4xl font-bold text-white",children:m.name.charAt(0)})})},"icon-".concat(n)),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)(o.E.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-3xl md:text-4xl lg:text-5xl font-extrabold text-white mb-2 drop-shadow-lg",children:m.name},"title-".concat(n)),(0,i.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.15},className:"flex items-center gap-2 flex-wrap mb-3",children:[m.category&&(0,i.jsx)("span",{className:"text-xs md:text-sm text-white/70 font-medium",children:m.category}),m.tags&&m.tags.length>0&&(0,i.jsxs)(i.Fragment,{children:[m.category&&(0,i.jsx)("span",{className:"text-white/40",children:"•"}),(0,i.jsx)("span",{className:"text-xs md:text-sm text-white/70 font-medium",children:m.tags.slice(0,2).join(" • ")})]}),(null===(t=m.developer)||void 0===t?void 0:t.verified)&&(0,i.jsxs)(i.Fragment,{children:[(m.category||m.tags&&m.tags.length>0)&&(0,i.jsx)("span",{className:"text-white/40",children:"|"}),(0,i.jsxs)("span",{className:"text-xs md:text-sm text-green-400 font-medium flex items-center gap-1",children:[(0,i.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"Verified Developer"]})]})]},"tags-".concat(n)),m.description&&(0,i.jsx)(o.E.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-base md:text-lg text-white/90 max-w-2xl leading-relaxed drop-shadow-md",children:(0,C.K)(m.description)},"desc-".concat(n))]}),(0,i.jsx)(S.Z,{appId:m.id,size:"lg",className:"bg-white/20 backdrop-blur-md rounded-full p-3 flex-shrink-0"})]}),(0,i.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex items-center gap-6 flex-wrap",children:[m.ratingCount&&m.ratingCount>0&&m.ratingAverage&&m.ratingAverage>0?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(k.Z,{className:"w-5 h-5 text-yellow-300 fill-yellow-300"}),(0,i.jsx)("span",{className:"text-white font-semibold",children:m.ratingAverage%1==0?m.ratingAverage.toString():m.ratingAverage.toFixed(1)})]}):(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-white/80 text-sm",children:"Not rated yet"}),(0,i.jsx)("span",{className:"px-2 py-1 bg-green-500/30 text-green-300 rounded-full text-xs font-medium border border-green-400/50",children:"New"})]}),m.installs&&(0,i.jsxs)("div",{className:"text-white/80 text-sm",children:[m.installs.toLocaleString()," installs"]}),(0,i.jsxs)(l.default,{href:"/apps/".concat(m.id),className:"ml-auto px-8 py-3 bg-white text-purple-600 rounded-full font-bold text-lg flex items-center gap-2 hover:bg-gray-100 transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:[(0,i.jsx)(A.Z,{className:"w-5 h-5"}),"Open App"]})]},"stats-".concat(n))]})]})}),(0,i.jsx)("div",{className:"absolute top-4 right-4 opacity-20",children:(0,i.jsx)("div",{className:"w-32 h-32 rounded-full bg-white/10 blur-3xl"})})]},n)}),a.length>1&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{r(e=>(e-1+a.length)%a.length),d(!1)},className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-black/50 hover:bg-black/70 backdrop-blur-md rounded-full flex items-center justify-center text-white transition-all duration-300 opacity-0 group-hover:opacity-100","aria-label":"Previous app",children:(0,i.jsx)(E.Z,{className:"w-6 h-6"})}),(0,i.jsx)("button",{onClick:()=>{r(e=>(e+1)%a.length),d(!1)},className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-black/50 hover:bg-black/70 backdrop-blur-md rounded-full flex items-center justify-center text-white transition-all duration-300 opacity-0 group-hover:opacity-100","aria-label":"Next app",children:(0,i.jsx)(w.Z,{className:"w-6 h-6"})})]}),a.length>1&&(0,i.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2",children:a.map((e,t)=>(0,i.jsx)("button",{onClick:()=>p(t),className:"w-2 h-2 rounded-full transition-all duration-300 ".concat(t===n?"bg-white w-8":"bg-white/50 hover:bg-white/75"),"aria-label":"Go to slide ".concat(t+1)},t))})]})}var F=a(7457);function z(e){let{app:t,showPrice:a=!1,price:s}=e;return(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(F.C,{id:t.id,icon:t.iconUrl,name:t.name,category:t.category,tags:t.tags,description:t.description,ratingAverage:t.ratingAverage,ratingCount:t.ratingCount})})}var P=a(3145);function L(e){let{title:t,featuredApp:a,ctaLabel:n="Open",gradientFrom:r,gradientTo:c,href:d,backgroundImage:m}=e,[p,x]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{!async function(){if(d)try{let e=new URL(d,window.location.origin),t=e.searchParams.get("category"),a=e.searchParams.get("tag"),i=new URLSearchParams;t&&i.set("category",t),a&&i.set("tag",a),i.set("limit","8");let s=await fetch("/api/apps?".concat(i.toString()));if(s.ok){let e=await s.json();x(e.apps||[])}}catch(e){console.error("Error fetching category apps:",e)}finally{h(!1)}}()},[d]);let g=p.find(e=>e.name.toLowerCase().includes(a.toLowerCase()))||p[0],f=p.slice(0,4),b=(0,i.jsxs)(o.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.02,y:-2},transition:{duration:.3},className:"relative h-[260px] w-full rounded-[24px] overflow-hidden cursor-pointer shadow-lg hover:shadow-xl transition-all duration-300",children:[m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(P.default,{src:m,alt:t,fill:!0,className:"object-cover",unoptimized:!0,priority:!0})}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/50 group-hover:bg-black/45 transition-colors duration-300"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(r," ").concat(c)}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/25 transition-colors duration-300"})]}),(0,i.jsxs)("div",{className:"relative h-full flex flex-col p-5",children:[(0,i.jsx)("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-3 drop-shadow-lg",children:t}),(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center mb-4",children:u?(0,i.jsx)("div",{className:"flex gap-3",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/20 animate-pulse"}),(0,i.jsx)("div",{className:"w-12 h-3 rounded bg-white/20 animate-pulse"})]},t))}):f.length>0?(0,i.jsx)("div",{className:"flex items-center justify-center gap-3 flex-wrap",children:f.map(e=>(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1.5 flex-shrink-0",children:[(0,i.jsx)("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-white/10 backdrop-blur-sm border border-white/20 overflow-hidden shadow-md hover:scale-105 transition-transform duration-200",children:e.iconUrl?(0,i.jsx)(P.default,{src:e.iconUrl,alt:e.name,width:80,height:80,className:"w-full h-full object-cover",unoptimized:!0}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-white/5",children:(0,i.jsx)("div",{className:"w-10 h-10 rounded-lg bg-white/20"})})}),(0,i.jsx)("p",{className:"text-white text-xs font-medium text-center max-w-[60px] md:max-w-[80px] truncate drop-shadow-lg",children:e.name})]},e.id))}):(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1.5",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-10 h-10 rounded-lg bg-white/20"})}),(0,i.jsx)("p",{className:"text-white text-xs font-medium drop-shadow-lg",children:"No apps"})]})})}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[(0,i.jsx)("div",{className:"flex-1 min-w-0",children:(0,i.jsx)("p",{className:"text-white text-base md:text-lg font-semibold truncate drop-shadow-lg",children:(null==g?void 0:g.name)||a})}),(0,i.jsx)("button",{onClick:e=>{e.preventDefault(),g?window.location.href="/apps/".concat(g.id):d&&(window.location.href=d)},className:"ml-3 px-5 py-2 bg-white text-black rounded-full text-sm font-semibold hover:bg-white/90 transition-colors duration-200 shadow-md flex-shrink-0",children:n})]})]})]});return d?(0,i.jsx)(l.default,{href:d,className:"block group",children:b}):b}var T=a(7067);let I=[{name:"Action",icon:c.Z,color:"from-red-500 to-red-600",href:"/apps?category=Games&tag=action"},{name:"Puzzle",icon:d.Z,color:"from-blue-500 to-blue-600",href:"/apps?category=Games&tag=puzzle"},{name:"News",icon:m.Z,color:"from-purple-500 to-purple-600",href:"/apps?category=Social&tag=news"},{name:"Social",icon:p.Z,color:"from-red-500 to-red-600",href:"/apps?category=Social"},{name:"Productivity",icon:x.Z,color:"from-blue-500 to-blue-600",href:"/apps?category=Tools&tag=productivity"},{name:"Communication",icon:u.Z,color:"from-green-500 to-green-600",href:"/apps?category=Social&tag=communication"},{name:"Music & Audio",icon:h.Z,color:"from-yellow-500 to-yellow-600",href:"/apps?category=Social&tag=music"},{name:"Education",icon:g.Z,color:"from-indigo-500 to-indigo-600",href:"/apps?category=Tools&tag=education"},{name:"Airdrop",icon:f.Z,color:"from-cyan-500 to-cyan-600",href:"/apps?category=Airdrops"},{name:"Prediction",icon:b.Z,color:"from-orange-500 to-orange-600",href:"/apps?category=Finance&tag=prediction"},{name:"Crowdfunding",icon:v.Z,color:"from-amber-500 to-amber-600",href:"/apps?category=Finance&tag=crowdfunding"}];function O(){let[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{window.innerWidth>=1024?f(!0):f(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{(0,j.Z0)("/")},[]),(0,s.useEffect)(()=>{(async function(){try{let e=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let a=await fetch(e,{credentials:"include"});if(a.ok)return await a.json();return{apps:t}}catch(a){return console.error("Error fetching ".concat(e,":"),a),{apps:t}}},a=(await e("/api/apps/trending?limit=10")).apps||[];console.log("Trending API response:",{count:a.length,apps:a.map(e=>({id:e.id,name:e.name,status:e.status,featured:e.featuredInBanner}))}),0===a.length&&(console.log("No trending apps, fetching recent approved apps..."),a=(await e("/api/apps?limit=10&sort=newest")).apps||[],console.log("Recent apps response:",{count:a.length,apps:a.map(e=>({id:e.id,name:e.name,status:e.status}))})),a.length>0?(console.log("Setting ".concat(a.length," apps to display")),t(a.slice(0,10)),c(a.slice(0,10))):console.warn("No apps found to display on homepage!")}catch(e){console.error("Error fetching data:",e)}finally{m(!1)}})()},[]),(0,i.jsxs)("div",{className:"flex min-h-screen bg-black",children:[(0,i.jsx)(n.Z,{onCollapseChange:(e,t)=>{x(e),h(t)},isOpen:g,onClose:()=>f(!1)}),(0,i.jsx)(y.Z,{isOpen:b,onClose:()=>v(!1)}),(0,i.jsxs)("main",{className:"flex-1 min-h-screen w-full pb-20 lg:pb-0 transition-all duration-300 ".concat(u?"ml-0":p?"lg:ml-16 ml-0":"lg:ml-64 ml-0"),children:[(0,i.jsx)(r.Z,{onMenuClick:()=>f(!g)}),(0,i.jsxs)("div",{className:"px-4 md:px-6 lg:px-8 py-6 md:py-8",children:[d?(0,i.jsx)("div",{className:"h-64 bg-gray-900 rounded-3xl animate-pulse mb-8"}):e.length>0?(0,i.jsx)(Z,{apps:e}):null,(0,i.jsxs)(o.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-10",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Trending"}),(0,i.jsxs)(l.default,{href:"/apps?sort=trending",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 font-semibold transition-colors",children:["See All",(0,i.jsx)(w.Z,{className:"w-5 h-5"})]})]}),d?(0,i.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,i.jsx)("div",{className:"w-[280px] h-48 bg-gray-900 rounded-2xl animate-pulse flex-shrink-0"},t))}):(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:a.length>0?a.map((e,t)=>(0,i.jsx)(z,{app:e},e.id)):(0,i.jsx)("div",{className:"text-gray-400 text-center py-12 w-full col-span-2",children:"No trending apps available"})})]}),(0,i.jsxs)(o.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.25},className:"mb-16 mt-10",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:"Popular"}),(0,i.jsx)(l.default,{href:"/apps",className:"text-blue-400 hover:text-blue-300 font-semibold transition-colors text-sm md:text-base",children:"More →"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:gap-6 max-w-4xl mx-auto",children:[(0,i.jsx)(L,{title:"Game",featuredApp:"Apple Run",ctaLabel:"Open",gradientFrom:"from-green-500",gradientTo:"to-green-600",href:"/apps?category=Games",backgroundImage:"/category-bg/game-bg.jpg"}),(0,i.jsx)(L,{title:"Music",featuredApp:"Spotify",ctaLabel:"Open",gradientFrom:"from-blue-500",gradientTo:"to-blue-600",href:"/apps?category=Social&tag=music",backgroundImage:"/category-bg/music-bg.jpg"}),(0,i.jsx)(L,{title:"Social",featuredApp:"WeChat",ctaLabel:"Open",gradientFrom:"from-red-500",gradientTo:"to-red-600",href:"/apps?category=Social",backgroundImage:"/category-bg/social-bg.jpg"}),(0,i.jsx)(L,{title:"Productivity",featuredApp:"Notion",ctaLabel:"Open",gradientFrom:"from-blue-500",gradientTo:"to-indigo-600",href:"/apps?category=Tools&tag=productivity",backgroundImage:"/category-bg/productivity-bg.jpg"}),(0,i.jsx)(L,{title:"Finance",featuredApp:"Coinbase",ctaLabel:"Open",gradientFrom:"from-emerald-500",gradientTo:"to-teal-600",href:"/apps?category=Finance",backgroundImage:"/category-bg/finance-bg.jpg"}),(0,i.jsx)(L,{title:"Utility",featuredApp:"Tools",ctaLabel:"Open",gradientFrom:"from-slate-500",gradientTo:"to-gray-600",href:"/apps?category=Tools",backgroundImage:"/category-bg/utility-bg.jpg"})]})]}),(0,i.jsxs)(o.E.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"mb-16 mt-10",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("div",{className:"h-8 w-1 bg-gradient-to-b from-[#0052FF] to-[#7C3AED] rounded-full"}),(0,i.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:"Explore apps"})]})}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4 md:gap-6",children:I.map((e,t)=>(0,i.jsx)(T.Z,{name:e.name,icon:e.icon,color:e.color,href:e.href,backgroundPattern:{Action:"action",Puzzle:"puzzle",News:"entertainment",Social:"social",Productivity:"productivity",Communication:"communication","Music & Audio":"music",Education:"education",Airdrop:"action",Prediction:"entertainment",Crowdfunding:"social"}[e.name]},e.name))})]})]})]})]})}},9105:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=a(7437),s=a(2265),l=a(8997),n=a(8239),r=a(3340),o=a(828);function c(e){let{appId:t,className:a="",size:c="md"}=e,[d,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),{toast:g}=(0,r.pm)(),{isAuthenticated:f,loading:b}=(0,o.a)(),v={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};(0,s.useEffect)(()=>{if(b||!f){m(!1),x(!1);return}let e=!0;async function a(){try{let a=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{credentials:"include"});if(!e)return;if(a.ok){let e=await a.json();m(e.isFavorited||!1)}else 401===a.status&&m(!1)}catch(t){if(!e)return;console.error("Error checking favorite status:",t)}finally{e&&x(!1)}}t&&a();let i=()=>{e&&(m(!1),x(!1))};return window.addEventListener("walletDisconnected",i),()=>{e=!1,window.removeEventListener("walletDisconnected",i)}},[t,f,b]);let w=async e=>{if(e.preventDefault(),e.stopPropagation(),u||p||!f){f||g({title:"Authentication required",description:"Please connect your wallet to add favorites",variant:"destructive"});return}h(!0);try{if(d){let e=await fetch("/api/collections/items?miniAppId=".concat(t,"&type=favorites"),{method:"DELETE",credentials:"include"});if(e.ok)m(!1),g({title:"Removed from favorites",description:"App removed from your favorites"});else if(401===e.status)g({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else throw Error("Failed to remove from favorites")}else{let e=await fetch("/api/collections/items",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({miniAppId:t,collectionType:"favorites"})});if(e.ok)m(!0),g({title:"Added to favorites",description:"App added to your favorites"});else if(401===e.status)g({title:"Authentication required",description:"Please connect your wallet",variant:"destructive"});else{var a;let t=await e.json().catch(()=>({}));if(null===(a=t.error)||void 0===a?void 0:a.includes("already"))m(!0);else throw Error(t.error||"Failed to add to favorites")}}}catch(e){console.error("Error toggling favorite:",e),g({title:"Error",description:e.message||"Failed to update favorites",variant:"destructive"})}finally{h(!1)}};return p?(0,i.jsx)("div",{className:"".concat(v[c]," rounded-full bg-gray-800 animate-pulse ").concat(a)}):(0,i.jsx)(n.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:w,className:"".concat(a," transition-all duration-300"),"aria-label":d?"Remove from favorites":"Add to favorites",children:(0,i.jsx)(l.Z,{className:"".concat(v[c]," transition-all duration-300 ").concat(d?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-400")})})}},7457:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var i=a(7437),s=a(7648),l=a(3145),n=a(6595),r=a(9105);function o(e){let{id:t,icon:a,name:o,category:c,tags:d,description:m,ratingAverage:p=0,ratingCount:x=0,onClick:u}=e,h=c?c+(d&&d.length>0?" • ".concat(d.slice(0,2).map(e=>e.split(/(?=[A-Z])/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")).join(" • ")):""):d&&d.length>0?d.slice(0,2).map(e=>e.split(/(?=[A-Z])/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")).join(" • "):null;return(0,i.jsxs)("div",{className:"flex items-center justify-between bg-[#0f1115] border border-white/5 rounded-2xl p-4 hover:bg-white/5 transition group",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 w-[70%] min-w-0",children:[(0,i.jsx)("div",{className:"relative flex-shrink-0",children:(0,i.jsx)(l.default,{src:a,alt:o,width:48,height:48,className:"h-12 w-12 rounded-xl object-cover"})}),(0,i.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,i.jsx)("h3",{className:"text-white font-semibold text-[16px] leading-tight truncate",children:o}),h&&(0,i.jsx)("span",{className:"text-xs text-white/40",children:h}),m&&(0,i.jsx)("p",{className:"text-xs text-white/50 mt-0.5 truncate max-w-[180px]",children:m}),x>0&&p>0?(0,i.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,i.jsx)(n.Z,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),(0,i.jsx)("span",{className:"text-xs text-white/60",children:p%1==0?p.toString():p.toFixed(1)})]}):(0,i.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,i.jsx)("span",{className:"text-xs text-white/40",children:"Not rated yet"}),(0,i.jsx)("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded-full text-[10px] font-medium border border-green-500/30",children:"New"})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[(0,i.jsx)(r.Z,{appId:t,size:"sm"}),(0,i.jsx)(s.default,{href:"/apps/".concat(t),onClick:u,className:"px-4 py-1.5 rounded-full bg-blue-600 text-white text-sm font-medium hover:bg-blue-500 transition shadow-md",children:"Open"})]})]})}},65:function(e,t,a){"use strict";function i(e){if(!e)return"";let t=e.indexOf(".");return -1!==t?e.substring(0,t+1):e}a.d(t,{K:function(){return i}})}},function(e){e.O(0,[590,648,145,209,2,892,457,284,293,171,971,117,744],function(){return e(e.s=9849)}),_N_E=e.O()}]);