(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{1154:function(e,s,t){Promise.resolve().then(t.bind(t,1842))},1842:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(7437),n=t(2265),r=t(9820),i=t(2381),l=t(4589),d=t(5060),c=t(279),o=t(3675),u=t(5291),m=t(4291),f=t(8728),x=t(8617),p=t(3229),h=t(4766),g=t(4743),b=t(3340),j=t(3386),N=t(3284);function y(){let[e,s]=(0,n.useState)(!0),[t,y]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[k,C]=(0,n.useState)(!0),[S,Z]=(0,n.useState)(!1),[_,R]=(0,n.useState)(!1),[E,F]=(0,n.useState)("info"),[z,O]=(0,n.useState)(""),[A,P]=(0,n.useState)(""),[T,D]=(0,n.useState)(""),[B,Q]=(0,n.useState)(!1),{toast:V}=(0,b.pm)();async function Y(){try{let e=await fetch("/api/admin/check",{credentials:"include"});if(e.ok){let t=await e.json();w(t.role||null),y(t.isAdmin||!1),"ADMIN"===t.role?U():s(!1)}}catch(e){console.error("Error checking admin:",e),s(!1)}}async function U(){try{let s=await fetch("/api/admin/settings",{credentials:"include"});if(s.ok){var e,t;let a=await s.json();C(null===(t=null===(e=a.settings)||void 0===e?void 0:e.premiumEnabled)||void 0===t||t)}}catch(e){console.error("Error fetching settings:",e)}finally{s(!1)}}async function q(){Z(!0);try{let e=await fetch("/api/admin/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({premiumEnabled:k})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to save settings")}V({title:"Success",description:"Settings saved successfully"})}catch(e){V({title:"Error",description:e.message||"Failed to save settings",variant:"destructive"})}finally{Z(!1)}}if((0,n.useEffect)(()=>{Y()},[]),e)return(0,a.jsx)(j.Z,{message:"Loading settings..."});if(!t)return(0,a.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pb-24",children:(0,a.jsx)("div",{className:"pt-20 pb-8",children:(0,a.jsx)("div",{className:"max-w-screen-md mx-auto px-4",children:(0,a.jsx)(r.Zb,{className:"glass-card border-red-500/30",children:(0,a.jsx)(r.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Admin access required"})]})})})})})});let L=async()=>{if(!z.trim()||!A.trim()){V({title:"Error",description:"Title and message are required",variant:"destructive"});return}Q(!0);try{let e=await fetch("/api/admin/notifications/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:E,title:z,message:A,link:T.trim()||void 0})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to send notification")}let s=await e.json();V({title:"Success",description:"Notification sent to ".concat(s.count," users")}),O(""),P(""),D(""),F("info"),R(!1)}catch(e){V({title:"Error",description:e.message||"Failed to send notification",variant:"destructive"})}finally{Q(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0B0F19] pb-24",children:[(0,a.jsx)(N.Z,{}),(0,a.jsx)("div",{className:"pt-8 pb-8",children:(0,a.jsxs)("div",{className:"max-w-screen-md mx-auto px-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-6 h-6 text-yellow-400"}),"Admin Settings"]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Configure feature flags and system settings"})]}),(0,a.jsxs)(r.Zb,{className:"glass-card mb-6",children:[(0,a.jsx)(r.Ol,{children:(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-purple-400"}),"Premium Features"]})}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-background-secondary",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(d._,{htmlFor:"premium-toggle",className:"text-base font-semibold cursor-pointer",children:"Enable Premium Features"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"When enabled, users can subscribe to Premium and access premium features like analytics, boosts, and access codes. When disabled, all premium features are hidden."})]}),(0,a.jsx)(l.r,{id:"premium-toggle",checked:k,onCheckedChange:C,className:"ml-4"})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-white/10",children:(0,a.jsxs)(i.z,{onClick:q,disabled:S,className:"w-full md:w-auto bg-base-blue hover:bg-base-blue/90",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),S?"Saving...":"Save Settings"]})})]})]}),(0,a.jsxs)(r.Zb,{className:"glass-card mb-6",children:[(0,a.jsx)(r.Ol,{children:(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-base-blue"}),"Send Notification to All Users"]})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Send a notification to all users in the system. This will appear in their notification sidebar."}),(0,a.jsxs)(i.z,{onClick:()=>R(!0),className:"w-full md:w-auto bg-base-blue hover:bg-base-blue/90",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Send Notification"]})]})]}),(0,a.jsxs)(r.Zb,{className:"glass-card",children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Feature Status"})}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[(0,a.jsx)("span",{className:"text-sm",children:"Premium Page"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(k?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:k?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[(0,a.jsx)("span",{className:"text-sm",children:"Premium Subscriptions"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(k?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:k?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[(0,a.jsx)("span",{className:"text-sm",children:"Premium Analytics"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(k?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:k?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-background-secondary",children:[(0,a.jsx)("span",{className:"text-sm",children:"Boost Requests"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(k?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:k?"Enabled":"Disabled"})]})]})})]}),(0,a.jsx)(m.Vq,{open:_,onOpenChange:R,children:(0,a.jsxs)(m.cZ,{className:"glass-card border-white/10 max-w-2xl",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsxs)(m.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-base-blue"}),"Send Notification to All Users"]}),(0,a.jsx)(m.Be,{children:"This notification will be sent to all users in the system."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"notification-type",children:"Type"}),(0,a.jsxs)(u.Ph,{value:E,onValueChange:F,children:[(0,a.jsx)(u.i4,{className:"glass-card",children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{className:"glass-card border-white/10",children:[(0,a.jsx)(u.Ql,{value:"info",children:"Info"}),(0,a.jsx)(u.Ql,{value:"success",children:"Success"}),(0,a.jsx)(u.Ql,{value:"warning",children:"Warning"}),(0,a.jsx)(u.Ql,{value:"error",children:"Error"}),(0,a.jsx)(u.Ql,{value:"new_app",children:"New App"}),(0,a.jsx)(u.Ql,{value:"trending",children:"Trending"}),(0,a.jsx)(u.Ql,{value:"app_updated",children:"App Updated"}),(0,a.jsx)(u.Ql,{value:"premium_offer",children:"Premium Offer"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"notification-title",children:"Title *"}),(0,a.jsx)(c.I,{id:"notification-title",value:z,onChange:e=>O(e.target.value),className:"glass-card",placeholder:"Notification title",maxLength:200})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"notification-message",children:"Message *"}),(0,a.jsx)(o.g,{id:"notification-message",value:A,onChange:e=>P(e.target.value),className:"glass-card min-h-[100px]",placeholder:"Notification message",maxLength:1e3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"notification-link",children:"Link (Optional)"}),(0,a.jsx)(c.I,{id:"notification-link",type:"url",value:T,onChange:e=>D(e.target.value),className:"glass-card",placeholder:"https://example.com (optional)"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional link that users can click to navigate"})]})]}),(0,a.jsxs)(m.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{R(!1),O(""),P(""),D(""),F("info")},disabled:B,children:"Cancel"}),(0,a.jsxs)(i.z,{onClick:L,disabled:B||!z.trim()||!A.trim(),className:"bg-base-blue hover:bg-base-blue/90",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),B?"Sending...":"Send to All Users"]})]})]})})]})})]})}},3386:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(7437),n=t(1817),r=t(3448);function i(e){let{size:s="md",className:t,text:i}=e;return(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center gap-2",t),children:[(0,a.jsx)(n.Z,{className:(0,r.cn)("animate-spin text-base-blue",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[s])}),i&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]})}function l(e){let{message:s="Loading..."}=e;return(0,a.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pt-20 px-4 pb-24",children:(0,a.jsx)("div",{className:"max-w-screen-md mx-auto flex items-center justify-center py-20",children:(0,a.jsx)(i,{size:"lg",text:s})})})}},9820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var a=t(7437),n=t(2265),r=t(3448);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});d.displayName="CardTitle",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},4291:function(e,s,t){"use strict";t.d(s,{$N:function(){return x},Be:function(){return p},Vq:function(){return d},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var a=t(7437),n=t(2265),r=t(9027),i=t(2489),l=t(3448);let d=r.fC;r.xz;let c=r.h_;r.x8;let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.aV,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});o.displayName=r.aV.displayName;let u=n.forwardRef((e,s)=>{let{className:t,children:n,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(o,{}),(0,a.jsxs)(r.VY,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[n,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.VY.displayName;let m=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};m.displayName="DialogHeader";let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};f.displayName="DialogFooter";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.Dx,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});x.displayName=r.Dx.displayName;let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.dk,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});p.displayName=r.dk.displayName},5060:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(7437),n=t(2265),r=t(6394),i=t(535),l=t(3448);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.f,{ref:s,className:(0,l.cn)(d(),t),...n})});c.displayName=r.f.displayName},5291:function(e,s,t){"use strict";t.d(s,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return h},i4:function(){return m},ki:function(){return u}});var a=t(7437),n=t(2265),r=t(3402),i=t(875),l=t(2135),d=t(401),c=t(3448);let o=r.fC;r.ZA;let u=r.B4,m=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(r.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[n,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let f=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=r.u_.displayName;let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=r.$G.displayName;let p=n.forwardRef((e,s)=>{let{className:t,children:n,position:i="popper",...l}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,a.jsx)(f,{}),(0,a.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(x,{})]})})});p.displayName=r.VY.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})}).displayName=r.__.displayName;let h=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e;return(0,a.jsxs)(r.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:n})]})});h.displayName=r.ck.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=r.Z0.displayName},4589:function(e,s,t){"use strict";t.d(s,{r:function(){return l}});var a=t(7437),n=t(2265),r=t(721),i=t(3448);let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...n,ref:s,children:(0,a.jsx)(r.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=r.fC.displayName},3675:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var a=t(7437),n=t(2265),r=t(3448);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});i.displayName="Textarea"}},function(e){e.O(0,[590,648,145,209,2,892,457,763,205,284,971,117,744],function(){return e(e.s=1154)}),_N_E=e.O()}]);