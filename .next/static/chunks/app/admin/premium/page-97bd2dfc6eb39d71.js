(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{7151:function(e,t,r){Promise.resolve().then(r.bind(r,3846))},2934:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8617:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},2735:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3846:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(7437),s=r(2265),i=r(9820),a=r(2381),l=r(279),c=r(9174),o=r(8617),d=r(9397),u=r(8930),f=r(2934),m=r(2735),p=r(3340),x=r(3386);function h(){let[e,t]=(0,s.useState)(!0),[r,h]=(0,s.useState)(!1),[v,g]=(0,s.useState)(null),[y,b]=(0,s.useState)([]),[j,N]=(0,s.useState)([]),[w,k]=(0,s.useState)([]),[S,A]=(0,s.useState)(""),{toast:E}=(0,p.pm)();async function C(){try{let[e,t,r]=await Promise.all([fetch("/api/admin/premium/apps",{credentials:"include"}),fetch("/api/admin/premium/subscribers",{credentials:"include"}),fetch("/api/admin/premium/boosts",{credentials:"include"})]);if(e.ok){let t=await e.json();b(t.apps||[])}if(t.ok){let e=await t.json();N(e.subscribers||[])}if(r.ok){let e=await r.json();k(e.requests||[])}}catch(e){console.error("Error fetching data:",e)}finally{t(!1)}}(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/admin/check",{credentials:"include"});if(e.ok){let r=await e.json();g(r.role||null),h(r.isAdmin||!1),"ADMIN"===r.role?C():t(!1)}}catch(e){console.error("Error checking admin:",e),t(!1)}}()},[]);let O=async()=>{if(!S.trim()){E({title:"Error",description:"Please enter an app ID",variant:"destructive"});return}try{let e=await fetch("/api/admin/premium/apps",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({appId:S})}),t=await e.json();if(e.ok)E({title:"Success",description:"App added to premium list"}),A(""),C();else throw Error(t.error||"Failed to add app")}catch(e){E({title:"Error",description:e.message,variant:"destructive"})}},T=async e=>{try{(await fetch("/api/admin/premium/apps/".concat(e),{method:"DELETE",credentials:"include"})).ok&&(E({title:"Success",description:"App removed from premium list"}),C())}catch(e){E({title:"Error",description:e.message,variant:"destructive"})}},Z=async e=>{try{(await fetch("/api/admin/premium/boosts/".concat(e,"/approve"),{method:"POST",credentials:"include"})).ok&&(E({title:"Success",description:"Boost request approved"}),C())}catch(e){E({title:"Error",description:e.message,variant:"destructive"})}};return e?(0,n.jsx)(x.Z,{message:"Loading..."}):r?(0,n.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pt-20 pb-24 px-4",children:(0,n.jsxs)("div",{className:"max-w-screen-xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold mb-2 flex items-center gap-2",children:[(0,n.jsx)(o.Z,{className:"w-6 h-6 text-purple-400"}),"Premium Management"]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage premium apps, subscriptions, and boost requests"})]}),(0,n.jsxs)(i.Zb,{className:"glass-card mb-6",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Add Premium App"})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(l.I,{placeholder:"Enter App ID",value:S,onChange:e=>A(e.target.value)}),(0,n.jsxs)(a.z,{onClick:O,children:[(0,n.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Add"]})]})})]}),(0,n.jsxs)(i.Zb,{className:"glass-card mb-6",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)(i.ll,{children:["Premium Apps (",y.length,")"]})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"space-y-2",children:y.map(e=>{var t,r;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background-secondary rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:(null===(t=e.miniApp)||void 0===t?void 0:t.name)||e.id}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:(null===(r=e.miniApp)||void 0===r?void 0:r.category)||"N/A"})]}),(0,n.jsx)(a.z,{size:"sm",variant:"destructive",onClick:()=>T(e.id),children:(0,n.jsx)(u.Z,{className:"w-4 h-4"})})]},e.id)})})})]}),(0,n.jsxs)(i.Zb,{className:"glass-card mb-6",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)(i.ll,{children:["Boost Requests (",w.length,")"]})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"space-y-2",children:w.map(e=>{var t,r;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background-secondary rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:(null===(t=e.miniApp)||void 0===t?void 0:t.name)||e.appId}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Requested by: ",(null===(r=e.developer)||void 0===r?void 0:r.name)||e.developerId]}),(0,n.jsx)(c.C,{variant:"approved"===e.status?"default":"secondary",children:e.status})]}),"pending"===e.status&&(0,n.jsxs)(a.z,{size:"sm",onClick:()=>Z(e.id),children:[(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Approve"]})]},e.id)})})})]}),(0,n.jsxs)(i.Zb,{className:"glass-card",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(i.ll,{children:["Subscribers (",j.length,")"]}),(0,n.jsxs)(a.z,{size:"sm",variant:"outline",onClick:()=>{let e=new Blob([[["Wallet","Status","Started At","Expires At","Renewal Count"],...j.map(e=>[e.wallet,e.status,new Date(e.startedAt).toLocaleDateString(),new Date(e.expiresAt).toLocaleDateString(),e.renewalCount.toString()])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="premium-subscribers-".concat(new Date().toISOString(),".csv"),r.click(),window.URL.revokeObjectURL(t)},children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background-secondary rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.wallet}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(e.expiresAt).toLocaleDateString()]})]}),(0,n.jsx)(c.C,{variant:"active"===e.status?"default":"secondary",children:e.status})]},e.id))})})]})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pt-20 px-4",children:(0,n.jsxs)("div",{className:"max-w-screen-md mx-auto text-center py-20",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"You must be an admin to access this page."})]})})}},3386:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7437),s=r(1817),i=r(3448);function a(e){let{size:t="md",className:r,text:a}=e;return(0,n.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center gap-2",r),children:[(0,n.jsx)(s.Z,{className:(0,i.cn)("animate-spin text-base-blue",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t])}),a&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:a})]})}function l(e){let{message:t="Loading..."}=e;return(0,n.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pt-20 px-4 pb-24",children:(0,n.jsx)("div",{className:"max-w-screen-md mx-auto flex items-center justify-center py-20",children:(0,n.jsx)(a,{size:"lg",text:t})})})}},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437);r(2265);var s=r(535),i=r(3448);let a=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)(a({variant:r}),t),...s})}},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return o}});var n=r(7437),s=r(2265),i=r(7495),a=r(535),l=r(3448);let c=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(c({variant:s,size:a,className:r})),ref:t,...d})});o.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return a},aY:function(){return o},ll:function(){return c}});var n=r(7437),s=r(2265),i=r(3448);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});a.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(7437),s=r(2265),i=r(3448);let a=s.forwardRef((e,t)=>{let{className:r,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});a.displayName="Input"},3340:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let s=0,i=new Map,a=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(o);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(1994),s=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},8575:function(e,t,r){"use strict";r.d(t,{F:function(){return i},e:function(){return a}});var n=r(2265);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let r=!1,n=e.map(e=>{let n=s(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():s(e[t],null)}}}}function a(...e){return n.useCallback(i(...e),e)}},7495:function(e,t,r){"use strict";r.d(t,{Z8:function(){return a},g7:function(){return l},sA:function(){return o}});var n=r(2265),s=r(8575),i=r(7437);function a(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...i}=e;if(n.isValidElement(r)){let e,a;let l=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,c=function(e,t){let r={...t};for(let n in t){let s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...e)=>{let t=i(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...i}:"className"===n&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==n.Fragment&&(c.ref=t?(0,s.F)(t,l):l),n.cloneElement(r,c)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:s,...a}=e,l=n.Children.toArray(s),c=l.find(d);if(c){let e=c.props.children,s=l.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...a,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,i.jsx)(t,{...a,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var l=a("Slot"),c=Symbol("radix.slottable");function o(e){let t=({children:e})=>(0,i.jsx)(i.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=c,t}function d(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}},535:function(e,t,r){"use strict";r.d(t,{j:function(){return a}});var n=r(1994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=n.W,a=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:l}=t,c=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],n=null==l?void 0:l[e];if(null===t)return null;let i=s(t)||s(n);return a[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return i(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[590,971,117,744],function(){return e(e.s=7151)}),_N_E=e.O()}]);