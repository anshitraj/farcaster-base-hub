(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{1781:function(e,a,s){Promise.resolve().then(s.bind(s,7005))},7005:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return R}});var t=s(7437),r=s(2265),l=s(9820),i=s(2381),n=s(279),d=s(3675),c=s(5060),o=s(5291),p=s(4291),m=s(3386),u=s(3284),h=s(3340),x=s(8906),f=s(2735),g=s(7689),j=s(1723),v=s(2934),N=s(9388),b=s(6362),w=s(6595),y=s(5868),C=s(8930),k=s(3113),U=s(2489),_=s(1239),I=s(3145),z=s(7648),S=s(4371);let A=["Finance","Tools","Social","Airdrops","Games","Memecoins","Utilities"];function R(){let[e,a]=(0,r.useState)([]),[s,R]=(0,r.useState)([]),[Z,E]=(0,r.useState)(!0),[F,T]=(0,r.useState)(null),[O,L]=(0,r.useState)(null),[D,P]=(0,r.useState)({}),[B,V]=(0,r.useState)(null),[M,Y]=(0,r.useState)(null),[$,H]=(0,r.useState)(!1),[J,W]=(0,r.useState)(""),[q,K]=(0,r.useState)(""),[X,G]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(""),[et,er]=(0,r.useState)(""),[el,ei]=(0,r.useState)(!1),[en,ed]=(0,r.useState)(!1),[ec,eo]=(0,r.useState)(!1),[ep,em]=(0,r.useState)(!1),[eu,eh]=(0,r.useState)(""),ex=(0,r.useRef)(null),ef=(0,r.useRef)(null),eg=(0,r.useRef)(null),{toast:ej}=(0,h.pm)();async function ev(){try{let e=await fetch("/api/admin/check",{credentials:"include"});if(e.ok){let a=await e.json();Y(a.role||null)}}catch(e){console.error("Error fetching user role:",e)}}async function eN(){try{let[e,s]=await Promise.all([fetch("/api/admin/apps",{credentials:"include"}),fetch("/api/admin/apps/pending",{credentials:"include"})]);if(e.ok){let s=await e.json();a(s.apps||[])}if(s.ok){let e=await s.json();R(e.apps||[])}}catch(e){console.error("Error fetching apps:",e),ej({title:"Error",description:"Failed to fetch apps",variant:"destructive"})}finally{E(!1)}}async function eb(e,a){T(e);try{let s={};"approve"===a?s.status="approved":"reject"===a?s.status="rejected":"verify"===a?s.verified=!0:"approve_contract"===a?(s.contractVerified=!0,s.verified=!0,s.status="approved"):"reject_contract"===a?(s.contractVerified=!1,s.status="pending_review"):"feature_banner"===a?s.featuredInBanner=!0:"unfeature_banner"===a&&(s.featuredInBanner=!1);let t=await fetch("/api/admin/apps",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({appId:e,...s})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update app")}ej({title:"Success",description:"approve"===a?"App approved! It will now appear on the homepage.":"App ".concat(a,"d successfully")}),await eN()}catch(e){ej({title:"Error",description:e.message||"Failed to update app",variant:"destructive"})}finally{T(null)}}async function ew(e,a){if(!e)return;let s="icon"===a?ed:"header"===a?eo:em;s(!0);try{let s=new FormData;s.append("file",e),s.append("type",a);let t=await fetch("/api/admin/upload",{method:"POST",credentials:"include",body:s});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to upload file")}let r=await t.json();"icon"===a?P({...D,iconUrl:r.url}):"header"===a?P({...D,headerImageUrl:r.url}):"screenshot"===a&&P({...D,screenshots:[...D.screenshots||[],r.url]}),ej({title:"Success",description:"".concat("icon"===a?"Icon":"header"===a?"Header image":"Screenshot"," uploaded successfully")})}catch(e){ej({title:"Upload Error",description:e.message||"Failed to upload file",variant:"destructive"})}finally{s(!1)}}(0,r.useEffect)(()=>{(0,S.Z0)("/admin/apps"),ev(),eN()},[]);let ey=()=>{var e;!eu.trim()||(null===(e=D.screenshots)||void 0===e?void 0:e.includes(eu.trim()))||(P({...D,screenshots:[...D.screenshots||[],eu.trim()]}),eh(""))},eC=e=>{var a;P({...D,screenshots:(null===(a=D.screenshots)||void 0===a?void 0:a.filter((a,s)=>s!==e))||[]})};async function ek(){if(O){T(O.id);try{let e=await fetch("/api/admin/apps",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({appId:O.id,...D})});if(!e.ok){let a=await e.json();throw Error(a.error||"Failed to update app")}ej({title:"Success",description:"App updated successfully"}),L(null),eN()}catch(e){ej({title:"Error",description:e.message||"Failed to update app",variant:"destructive"})}finally{T(null)}}}async function eU(e){T(e);try{let a=await fetch("/api/admin/apps?appId=".concat(e),{method:"DELETE",credentials:"include"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to delete app")}ej({title:"Success",description:"App deleted successfully"}),V(null),eN()}catch(e){ej({title:"Error",description:e.message||"Failed to delete app",variant:"destructive"})}finally{T(null)}}return Z?(0,t.jsx)(m.Z,{message:"Loading admin panel..."}):(0,t.jsxs)("div",{className:"min-h-screen bg-[#0B0F19] pb-24",children:[(0,t.jsx)(u.Z,{}),(0,t.jsx)("div",{className:"pt-8 pb-8",children:(0,t.jsxs)("div",{className:"max-w-screen-lg mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold mb-2 flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"w-6 h-6 text-base-blue"}),"Admin - App Management"]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Review and manage app submissions"}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)("a",{href:"/api/admin/apps/export-csv",download:!0,children:(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4"}),"Export CSV"]})}),"ADMIN"===M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2 border-base-blue/50 text-base-blue hover:bg-base-blue/10",onClick:()=>H(!0),children:[(0,t.jsx)(g.Z,{className:"w-4 h-4"}),"Auto Import"]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-2 border-purple-500/50 text-purple-400 hover:bg-purple-500/10",onClick:()=>ee(!0),children:[(0,t.jsx)(g.Z,{className:"w-4 h-4"}),"Import from .json URL"]})]})]})]}),s.length>0&&(0,t.jsxs)(l.Zb,{className:"glass-card mb-6",children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5 text-yellow-500"}),"Pending Review (",s.length,")"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>{var a,s;return(0,t.jsx)("div",{className:"p-4 rounded-lg bg-background-secondary border border-white/10",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[e.iconUrl&&(0,t.jsx)(I.default,{src:e.iconUrl,alt:e.name,width:64,height:64,className:"w-16 h-16 rounded-xl flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[(0,t.jsxs)("span",{children:["Category: ",e.category]}),(0,t.jsxs)("span",{children:["Developer: ",(null===(a=e.developer)||void 0===a?void 0:a.name)||"Unknown"]}),(null===(s=e.developer)||void 0===s?void 0:s.verified)&&(0,t.jsx)("span",{className:"text-green-500",children:"✓ Verified Dev"})]}),e.reviewMessage&&(0,t.jsxs)("div",{className:"bg-base-blue/10 border border-base-blue/30 rounded p-2 mt-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium mb-1",children:"Review Request:"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.reviewMessage})]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"approve"),disabled:F===e.id,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Approve"]}),(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"reject"),disabled:F===e.id,variant:"destructive",size:"sm",children:[(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Reject"]}),(0,t.jsx)(z.default,{href:e.url,target:"_blank",children:(0,t.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"View App"]})})]})]})]})},e.id)})})})]}),(0,t.jsxs)(l.Zb,{className:"glass-card",children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{children:["All Apps (",e.length,")"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-background-secondary border border-white/10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.iconUrl&&(0,t.jsx)(I.default,{src:e.iconUrl,alt:e.name,width:48,height:48,className:"w-12 h-12 rounded-lg flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-semibold truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[(0,t.jsxs)("span",{children:["Status: ",e.status]}),e.verified&&(0,t.jsx)("span",{className:"text-green-500",children:"✓ Verified"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,t.jsxs)("p",{className:"truncate",children:["URL: ",e.url]}),e.baseMiniAppUrl&&(0,t.jsxs)("p",{className:"truncate",children:["Base: ",e.baseMiniAppUrl]}),e.farcasterUrl&&(0,t.jsxs)("p",{className:"truncate",children:["Farcaster: ",e.farcasterUrl]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[("pending_review"===e.status||"pending"===e.status)&&(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"approve"),disabled:F===e.id,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.contractAddress&&!e.contractVerified&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"approve_contract"),disabled:F===e.id,variant:"outline",size:"sm",className:"border-green-600/50 text-green-400 hover:bg-green-600/10",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),"Approve Contract"]}),(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"reject_contract"),disabled:F===e.id,variant:"outline",size:"sm",className:"border-red-600/50 text-red-400 hover:bg-red-600/10",children:[(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),"Reject Contract"]})]}),!e.verified&&(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"verify"),disabled:F===e.id,variant:"outline",size:"sm",className:"border-green-600/50 text-green-400 hover:bg-green-600/10",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),"Verify"]}),e.featuredInBanner?(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"unfeature_banner"),disabled:F===e.id,variant:"outline",size:"sm",className:"border-yellow-600/50 text-yellow-400 hover:bg-yellow-600/10",title:"Remove from homepage banner",children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 mr-1 fill-yellow-400"}),"Featured"]}):(0,t.jsxs)(i.z,{onClick:()=>eb(e.id,"feature_banner"),disabled:F===e.id,variant:"outline",size:"sm",className:"border-purple-600/50 text-purple-400 hover:bg-purple-600/10",title:"Add to homepage banner",children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),"Feature"]}),(0,t.jsxs)(i.z,{onClick:()=>{L(e),P({name:e.name,description:e.description,url:e.url,baseMiniAppUrl:e.baseMiniAppUrl||"",farcasterUrl:e.farcasterUrl||"",iconUrl:e.iconUrl||"",headerImageUrl:e.headerImageUrl||"",category:e.category,screenshots:e.screenshots||[]}),eh("")},disabled:F===e.id,variant:"outline",size:"sm",className:"border-base-blue/50 text-base-blue hover:bg-base-blue/10",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),"Edit"]}),"ADMIN"===M&&(0,t.jsxs)(i.z,{onClick:()=>V(e.id),disabled:F===e.id,variant:"outline",size:"sm",className:"border-red-600/50 text-red-400 hover:bg-red-600/10",children:[(0,t.jsx)(C.Z,{className:"w-4 h-4 mr-1"}),"Delete"]}),(0,t.jsx)(z.default,{href:"/apps/".concat(e.id),children:(0,t.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"View"]})})]})]},e.id))})})]}),(0,t.jsx)(p.Vq,{open:!!O,onOpenChange:e=>!e&&L(null),children:(0,t.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(p.fK,{children:[(0,t.jsxs)(p.$N,{children:["Edit App: ",null==O?void 0:O.name]}),(0,t.jsx)(p.Be,{children:"Update app details. All changes will be saved immediately."})]}),O&&(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-name",children:"App Name *"}),(0,t.jsx)(n.I,{id:"edit-name",value:D.name||"",onChange:e=>P({...D,name:e.target.value}),className:"glass-card"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-description",children:"Description *"}),(0,t.jsx)(d.g,{id:"edit-description",value:D.description||"",onChange:e=>P({...D,description:e.target.value}),className:"glass-card min-h-[100px]"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-url",children:"Main Website URL *"}),(0,t.jsx)(n.I,{id:"edit-url",type:"url",value:D.url||"",onChange:e=>P({...D,url:e.target.value}),className:"glass-card"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-base-url",children:"Base Mini App URL (Optional)"}),(0,t.jsx)(n.I,{id:"edit-base-url",type:"url",value:D.baseMiniAppUrl||"",onChange:e=>P({...D,baseMiniAppUrl:e.target.value}),className:"glass-card"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-farcaster-url",children:"Farcaster Mini App URL (Optional)"}),(0,t.jsx)(n.I,{id:"edit-farcaster-url",type:"url",value:D.farcasterUrl||"",onChange:e=>P({...D,farcasterUrl:e.target.value}),className:"glass-card"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-icon-url",children:"Icon URL"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.I,{id:"edit-icon-url",type:"url",value:D.iconUrl||"",onChange:e=>P({...D,iconUrl:e.target.value}),className:"glass-card flex-1",placeholder:"https://example.com/icon.png"}),(0,t.jsx)("input",{ref:ex,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&ew(s,"icon")},disabled:en}),(0,t.jsx)(i.z,{type:"button",variant:"outline",size:"sm",disabled:en,className:"whitespace-nowrap",onClick:()=>{var e;return null===(e=ex.current)||void 0===e?void 0:e.click()},children:en?"Uploading...":"Upload"})]}),D.iconUrl&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(I.default,{src:D.iconUrl,alt:"Icon preview",width:64,height:64,className:"w-16 h-16 rounded-lg border border-gray-700"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter a URL or upload a new icon image (max 5MB)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-header-image-url",children:"Header Image URL (Optional)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.I,{id:"edit-header-image-url",type:"url",placeholder:"https://myapp.example.com/header.png or og-image from farcaster.json",value:D.headerImageUrl||"",onChange:e=>P({...D,headerImageUrl:e.target.value}),className:"glass-card flex-1"}),(0,t.jsx)("input",{ref:ef,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&ew(s,"header")},disabled:ec}),(0,t.jsx)(i.z,{type:"button",variant:"outline",size:"sm",disabled:ec,className:"whitespace-nowrap",onClick:()=>{var e;return null===(e=ef.current)||void 0===e?void 0:e.click()},children:ec?"Uploading...":"Upload"})]}),D.headerImageUrl&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(I.default,{src:D.headerImageUrl,alt:"Header preview",width:400,height:200,className:"w-full max-w-md h-32 object-cover rounded-lg border border-gray-700"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Header image for app banner and detail page (like Twitter header). Enter a URL or upload a new image (max 5MB)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"edit-category",children:"Category *"}),(0,t.jsxs)(o.Ph,{value:D.category||"",onValueChange:e=>P({...D,category:e}),children:[(0,t.jsx)(o.i4,{className:"glass-card",children:(0,t.jsx)(o.ki,{placeholder:"Select category"})}),(0,t.jsx)(o.Bw,{className:"glass-card border-white/10",children:A.map(e=>(0,t.jsx)(o.Ql,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"screenshots",children:"Screenshots (Optional)"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Add screenshots to showcase the app, similar to Play Store. You can upload images or add URLs."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.I,{id:"screenshots",type:"url",placeholder:"https://example.com/screenshot.png",value:eu,onChange:e=>eh(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eu.trim()&&(e.preventDefault(),ey())},className:"glass-card flex-1"}),(0,t.jsx)("input",{ref:eg,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&ew(s,"screenshot")},disabled:ep}),(0,t.jsx)(i.z,{type:"button",onClick:ey,disabled:!eu.trim(),className:"bg-base-blue hover:bg-base-blue/90",children:(0,t.jsx)(k.Z,{className:"w-4 h-4"})}),(0,t.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=eg.current)||void 0===e?void 0:e.click()},disabled:ep,className:"whitespace-nowrap",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),ep?"Uploading...":"Upload"]})]}),D.screenshots&&D.screenshots.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:D.screenshots.map((e,a)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e,alt:"Screenshot ".concat(a+1),className:"w-full h-32 object-cover rounded-lg border border-white/10",onError:e=>{e.target.src="https://via.placeholder.com/400x300?text=Invalid+Image"}}),(0,t.jsx)("button",{type:"button",onClick:()=>eC(a),className:"absolute top-1 right-1 bg-red-500/80 hover:bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(U.Z,{className:"w-3 h-3"})})]},a))})]})]})]}),(0,t.jsxs)(p.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>L(null),disabled:!!F,children:"Cancel"}),(0,t.jsx)(i.z,{onClick:ek,disabled:!!F||!D.name||!D.description||!D.url||!D.category,className:"bg-base-blue hover:bg-base-blue/90",children:F===(null==O?void 0:O.id)?"Saving...":"Save Changes"})]})]})}),(0,t.jsx)(p.Vq,{open:$,onOpenChange:H,children:(0,t.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-md",children:[(0,t.jsxs)(p.fK,{children:[(0,t.jsxs)(p.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(_.Z,{className:"w-5 h-5 text-base-blue"}),"Auto Import from Farcaster.json"]}),(0,t.jsx)(p.Be,{children:"Enter the app URL and developer wallet. We'll automatically fetch metadata from /.well-known/farcaster.json"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"import-url",children:"App URL *"}),(0,t.jsx)(n.I,{id:"import-url",type:"url",placeholder:"https://myapp.example.com",value:J,onChange:e=>W(e.target.value),className:"glass-card"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"import-wallet",children:"Developer Wallet *"}),(0,t.jsx)(n.I,{id:"import-wallet",type:"text",placeholder:"0x...",value:q,onChange:e=>K(e.target.value),className:"glass-card font-mono"})]})]}),(0,t.jsxs)(p.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>{H(!1),W(""),K("")},disabled:X,children:"Cancel"}),(0,t.jsx)(i.z,{onClick:async()=>{if(!J||!q){ej({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}G(!0);try{let e=await fetch("/api/admin/apps/auto-import",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:J,developerWallet:q})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to import app");ej({title:"Success",description:"App imported successfully from farcaster.json"}),H(!1),W(""),K(""),eN()}catch(e){ej({title:"Error",description:e.message||"Failed to import app",variant:"destructive"})}finally{G(!1)}},disabled:X||!J||!q,className:"bg-base-blue hover:bg-base-blue/90",children:X?"Importing...":"Import App"})]})]})}),(0,t.jsx)(p.Vq,{open:Q,onOpenChange:ee,children:(0,t.jsxs)(p.cZ,{className:"glass-card border-white/10 max-w-md",children:[(0,t.jsxs)(p.fK,{children:[(0,t.jsxs)(p.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 text-purple-400"}),"Import from Farcaster.json URL"]}),(0,t.jsx)(p.Be,{children:"Enter the direct URL to a farcaster.json file and the developer wallet address. The app will be automatically created and approved."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"json-url",children:"Farcaster.json URL *"}),(0,t.jsx)(n.I,{id:"json-url",type:"url",placeholder:"https://example.com/.well-known/farcaster.json",value:ea,onChange:e=>es(e.target.value),className:"glass-card"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Direct URL to the farcaster.json file"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"json-wallet",children:"Developer Wallet *"}),(0,t.jsx)(n.I,{id:"json-wallet",type:"text",placeholder:"0x...",value:et,onChange:e=>er(e.target.value),className:"glass-card font-mono"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wallet address of the app developer"})]})]}),(0,t.jsxs)(p.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>{ee(!1),es(""),er("")},disabled:el,children:"Cancel"}),(0,t.jsx)(i.z,{onClick:async()=>{if(!ea||!et){ej({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}if(!/^0x[a-fA-F0-9]{40}$/i.test(et)){ej({title:"Error",description:"Invalid wallet address format",variant:"destructive"});return}ei(!0);try{let e=await fetch("/api/admin/apps/import-json",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({jsonUrl:ea,developerWallet:et})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to import app");ej({title:"Success",description:"App imported successfully from farcaster.json URL"}),ee(!1),es(""),er(""),eN()}catch(e){ej({title:"Error",description:e.message||"Failed to import app",variant:"destructive"})}finally{ei(!1)}},disabled:el||!ea||!et,className:"bg-purple-500 hover:bg-purple-600",children:el?"Importing...":"Import App"})]})]})}),(0,t.jsx)(p.Vq,{open:!!B,onOpenChange:e=>!e&&V(null),children:(0,t.jsxs)(p.cZ,{className:"glass-card border-red-500/30",children:[(0,t.jsxs)(p.fK,{children:[(0,t.jsx)(p.$N,{className:"text-red-400",children:"Delete App"}),(0,t.jsx)(p.Be,{children:"Are you sure you want to delete this app? This action cannot be undone and will delete all associated ratings, reviews, XP, and earnings."})]}),(0,t.jsxs)(p.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>V(null),disabled:!!F,children:"Cancel"}),(0,t.jsx)(i.z,{variant:"destructive",onClick:()=>B&&eU(B),disabled:!!F,children:F===B?"Deleting...":"Delete App"})]})]})})]})})]})}},3386:function(e,a,s){"use strict";s.d(a,{Z:function(){return n}});var t=s(7437),r=s(1817),l=s(3448);function i(e){let{size:a="md",className:s,text:i}=e;return(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center gap-2",s),children:[(0,t.jsx)(r.Z,{className:(0,l.cn)("animate-spin text-base-blue",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[a])}),i&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]})}function n(e){let{message:a="Loading..."}=e;return(0,t.jsx)("div",{className:"min-h-screen bg-[#0B0F19] pt-20 px-4 pb-24",children:(0,t.jsx)("div",{className:"max-w-screen-md mx-auto flex items-center justify-center py-20",children:(0,t.jsx)(i,{size:"lg",text:a})})})}},9820:function(e,a,s){"use strict";s.d(a,{Ol:function(){return n},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var t=s(7437),r=s(2265),l=s(3448);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},4291:function(e,a,s){"use strict";s.d(a,{$N:function(){return h},Be:function(){return x},Vq:function(){return d},cN:function(){return u},cZ:function(){return p},fK:function(){return m}});var t=s(7437),r=s(2265),l=s(9027),i=s(2489),n=s(3448);let d=l.fC;l.xz;let c=l.h_;l.x8;let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.aV,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});o.displayName=l.aV.displayName;let p=r.forwardRef((e,a)=>{let{className:s,children:r,...d}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(o,{}),(0,t.jsxs)(l.VY,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=l.VY.displayName;let m=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};m.displayName="DialogHeader";let u=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};u.displayName="DialogFooter";let h=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.Dx,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});h.displayName=l.Dx.displayName;let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.dk,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});x.displayName=l.dk.displayName},5060:function(e,a,s){"use strict";s.d(a,{_:function(){return c}});var t=s(7437),r=s(2265),l=s(6394),i=s(535),n=s(3448);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.f,{ref:a,className:(0,n.cn)(d(),s),...r})});c.displayName=l.f.displayName},5291:function(e,a,s){"use strict";s.d(a,{Bw:function(){return x},Ph:function(){return o},Ql:function(){return f},i4:function(){return m},ki:function(){return p}});var t=s(7437),r=s(2265),l=s(3402),i=s(875),n=s(2135),d=s(401),c=s(3448);let o=l.fC;l.ZA;let p=l.B4,m=r.forwardRef((e,a)=>{let{className:s,children:r,...n}=e;return(0,t.jsxs)(l.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,t.jsx)(l.JO,{asChild:!0,children:(0,t.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.xz.displayName;let u=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});u.displayName=l.u_.displayName;let h=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=l.$G.displayName;let x=r.forwardRef((e,a)=>{let{className:s,children:r,position:i="popper",...n}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsxs)(l.VY,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,t.jsx)(u,{}),(0,t.jsx)(l.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});x.displayName=l.VY.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.__.displayName;let f=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsxs)(l.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.wU,{children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(l.eT,{children:r})]})});f.displayName=l.ck.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.Z0.displayName},3675:function(e,a,s){"use strict";s.d(a,{g:function(){return i}});var t=s(7437),r=s(2265),l=s(3448);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r})});i.displayName="Textarea"},4371:function(e,a,s){"use strict";s.d(a,{L9:function(){return l},Z0:function(){return r},m$:function(){return i}});var t=s(257);function r(e){window.gtag&&window.gtag("config",t.env.NEXT_PUBLIC_GA_ID,{page_path:e}),window.plausible&&window.plausible("pageview"),t.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT&&fetch(t.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pageview",path:e,timestamp:new Date().toISOString()})}).catch(()=>{})}function l(e){let{action:a,category:s,label:r,value:l}=e;window.gtag&&window.gtag("event",a,{event_category:s,event_label:r,value:l}),window.plausible&&window.plausible(a,{props:{category:s,label:r,value:l}}),t.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT&&fetch(t.env.NEXT_PUBLIC_ANALYTICS_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"event",action:a,category:s,label:r,value:l,timestamp:new Date().toISOString()})}).catch(()=>{})}function i(e,a){l({action:a,category:"app",label:e})}}},function(e){e.O(0,[590,648,145,209,2,892,457,763,620,284,971,117,744],function(){return e(e.s=1781)}),_N_E=e.O()}]);